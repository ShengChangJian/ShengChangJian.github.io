I"X <blockquote>
  <p>JSP (Java Server Pages)æ˜¯åŸºäºJavaè¯­è¨€çš„åŠ¨æ€ç½‘é¡µæŠ€æœ¯ï¼Œå®ƒä»¥â€.jspâ€ä¸ºæ‰©å±•åã€‚åœ¨ä¸€ä¸ªJSPé¡µé¢ä¸­ï¼Œå¯ä»¥åŒ…æ‹¬æŒ‡ä»¤æ ‡è¯†ã€HTML ä»£ç ã€
JavaScript ä»£ç ã€åµŒå…¥çš„ Java ä»£ç ã€æ³¨é‡Šå’ŒJSPåŠ¨ä½œæ ‡è¯†ç­‰å†…å®¹ã€‚ä½†è¿™äº›å†…å®¹å¹¶ä¸æ˜¯ä¸€ä¸ª JSP é¡µé¢æ‰€å¿…éœ€çš„ã€‚</p>
</blockquote>

<ul id="markdown-toc">
  <li><a href="#jsp-å¼€å‘ç¯å¢ƒé…ç½®" id="markdown-toc-jsp-å¼€å‘ç¯å¢ƒé…ç½®">JSP å¼€å‘ç¯å¢ƒé…ç½®</a></li>
  <li><a href="#jspè¿è¡ŒåŸç†" id="markdown-toc-jspè¿è¡ŒåŸç†">JSPè¿è¡ŒåŸç†</a></li>
  <li><a href="#jspç¼–è¯‘æŒ‡ä»¤æ ‡è¯†" id="markdown-toc-jspç¼–è¯‘æŒ‡ä»¤æ ‡è¯†">JSPç¼–è¯‘æŒ‡ä»¤æ ‡è¯†</a>    <ul>
      <li><a href="#é¡µé¢æŒ‡ä»¤pageçš„ä½¿ç”¨" id="markdown-toc-é¡µé¢æŒ‡ä»¤pageçš„ä½¿ç”¨">é¡µé¢æŒ‡ä»¤pageçš„ä½¿ç”¨</a></li>
      <li><a href="#æ–‡ä»¶åŒ…å«æŒ‡ä»¤includeçš„ä½¿ç”¨" id="markdown-toc-æ–‡ä»¶åŒ…å«æŒ‡ä»¤includeçš„ä½¿ç”¨">æ–‡ä»¶åŒ…å«æŒ‡ä»¤includeçš„ä½¿ç”¨</a></li>
      <li><a href="#å¼•ç”¨æ ‡ç­¾åº“æŒ‡ä»¤taglibçš„ä½¿ç”¨" id="markdown-toc-å¼•ç”¨æ ‡ç­¾åº“æŒ‡ä»¤taglibçš„ä½¿ç”¨">å¼•ç”¨æ ‡ç­¾åº“æŒ‡ä»¤taglibçš„ä½¿ç”¨</a></li>
    </ul>
  </li>
  <li><a href="#ä½¿ç”¨jspè„šæœ¬" id="markdown-toc-ä½¿ç”¨jspè„šæœ¬">ä½¿ç”¨JSPè„šæœ¬</a>    <ul>
      <li><a href="#åœ¨jspä¸­åº”ç”¨ä»£ç ç‰‡æ®µ" id="markdown-toc-åœ¨jspä¸­åº”ç”¨ä»£ç ç‰‡æ®µ">åœ¨JSPä¸­åº”ç”¨ä»£ç ç‰‡æ®µ</a></li>
      <li><a href="#ä½¿ç”¨jspè¡¨è¾¾å¼" id="markdown-toc-ä½¿ç”¨jspè¡¨è¾¾å¼">ä½¿ç”¨JSPè¡¨è¾¾å¼</a></li>
      <li><a href="#å£°æ˜æ ‡è¯†çš„ä½¿ç”¨" id="markdown-toc-å£°æ˜æ ‡è¯†çš„ä½¿ç”¨">å£°æ˜æ ‡è¯†çš„ä½¿ç”¨</a></li>
      <li><a href="#æ³¨é‡Šçš„ä½¿ç”¨" id="markdown-toc-æ³¨é‡Šçš„ä½¿ç”¨">æ³¨é‡Šçš„ä½¿ç”¨</a></li>
    </ul>
  </li>
  <li><a href="#jspåŠ¨ä½œæŒ‡ä»¤æ ‡ç­¾æˆ–å…ƒç´ æˆ–æ ‡è¯†" id="markdown-toc-jspåŠ¨ä½œæŒ‡ä»¤æ ‡ç­¾æˆ–å…ƒç´ æˆ–æ ‡è¯†">JSPåŠ¨ä½œæŒ‡ä»¤ï¼ˆæ ‡ç­¾æˆ–å…ƒç´ æˆ–æ ‡è¯†ï¼‰</a></li>
  <li><a href="#jspå†…ç½®å¯¹è±¡" id="markdown-toc-jspå†…ç½®å¯¹è±¡">JSPå†…ç½®å¯¹è±¡</a></li>
  <li><a href="#jspé¢å‘å¯¹è±¡-javabeanæŠ€æœ¯" id="markdown-toc-jspé¢å‘å¯¹è±¡-javabeanæŠ€æœ¯">JSPé¢å‘å¯¹è±¡-JavaBeanæŠ€æœ¯</a></li>
  <li><a href="#servletæŠ€æœ¯" id="markdown-toc-servletæŠ€æœ¯">ServletæŠ€æœ¯</a>    <ul>
      <li><a href="#servleté…ç½®è§£æ" id="markdown-toc-servleté…ç½®è§£æ">Servleté…ç½®è§£æ</a></li>
      <li><a href="#servletè¿‡æ»¤å™¨" id="markdown-toc-servletè¿‡æ»¤å™¨">Servletè¿‡æ»¤å™¨</a></li>
    </ul>
  </li>
  <li><a href="#elä¸jstlæ ‡ç­¾åº“" id="markdown-toc-elä¸jstlæ ‡ç­¾åº“">ELä¸JSTLæ ‡ç­¾åº“</a></li>
  <li><a href="#åŠ¨æ€ç½‘ç«™ä¹‹çµé­‚-æ•°æ®åº“åº”ç”¨å¼€å‘" id="markdown-toc-åŠ¨æ€ç½‘ç«™ä¹‹çµé­‚-æ•°æ®åº“åº”ç”¨å¼€å‘">åŠ¨æ€ç½‘ç«™ä¹‹çµé­‚â€”-æ•°æ®åº“åº”ç”¨å¼€å‘</a></li>
  <li><a href="#struts-2" id="markdown-toc-struts-2">Struts 2</a>    <ul>
      <li><a href="#è®¤è¯†actionå¯¹è±¡" id="markdown-toc-è®¤è¯†actionå¯¹è±¡">è®¤è¯†Actionå¯¹è±¡</a>        <ul>
          <li><a href="#è¯·æ±‚å‚æ•°çš„æ³¨å…¥åŸç†" id="markdown-toc-è¯·æ±‚å‚æ•°çš„æ³¨å…¥åŸç†">è¯·æ±‚å‚æ•°çš„æ³¨å…¥åŸç†</a></li>
          <li><a href="#actionçš„åŸºæœ¬æµç¨‹" id="markdown-toc-actionçš„åŸºæœ¬æµç¨‹">Actionçš„åŸºæœ¬æµç¨‹</a></li>
        </ul>
      </li>
      <li><a href="#ä»€ä¹ˆæ˜¯åŠ¨æ€action" id="markdown-toc-ä»€ä¹ˆæ˜¯åŠ¨æ€action">ä»€ä¹ˆæ˜¯åŠ¨æ€Action</a>        <ul>
          <li><a href="#åŠ¨æ€-action-çš„åº”ç”¨" id="markdown-toc-åŠ¨æ€-action-çš„åº”ç”¨">åŠ¨æ€ Action çš„åº”ç”¨</a></li>
          <li><a href="#struts2-çš„é…ç½®æ–‡ä»¶" id="markdown-toc-struts2-çš„é…ç½®æ–‡ä»¶">Struts2 çš„é…ç½®æ–‡ä»¶</a></li>
        </ul>
      </li>
      <li><a href="#struts2-çš„åŒ…é…ç½®" id="markdown-toc-struts2-çš„åŒ…é…ç½®">Struts2 çš„åŒ…é…ç½®</a></li>
      <li><a href="#action-ç›¸å…³é…ç½®" id="markdown-toc-action-ç›¸å…³é…ç½®">Action ç›¸å…³é…ç½®</a></li>
      <li><a href="#è¿”å›ç»“æœçš„é…ç½®" id="markdown-toc-è¿”å›ç»“æœçš„é…ç½®">è¿”å›ç»“æœçš„é…ç½®</a></li>
      <li><a href="#ognlè¡¨è¾¾å¼" id="markdown-toc-ognlè¡¨è¾¾å¼">OGNLè¡¨è¾¾å¼</a></li>
      <li><a href="#struts-2-æ ‡ç­¾åº“" id="markdown-toc-struts-2-æ ‡ç­¾åº“">Struts 2 æ ‡ç­¾åº“</a></li>
      <li><a href="#æ‹¦æˆªå™¨çš„ä½¿ç”¨" id="markdown-toc-æ‹¦æˆªå™¨çš„ä½¿ç”¨">æ‹¦æˆªå™¨çš„ä½¿ç”¨</a></li>
      <li><a href="#struts-2-éªŒè¯æ¡†æ¶" id="markdown-toc-struts-2-éªŒè¯æ¡†æ¶">Struts 2 éªŒè¯æ¡†æ¶</a></li>
    </ul>
  </li>
  <li><a href="#æ•°æ®åº“æŒä¹…åŒ–æŠ€æœ¯-hibernate" id="markdown-toc-æ•°æ®åº“æŒä¹…åŒ–æŠ€æœ¯-hibernate">æ•°æ®åº“æŒä¹…åŒ–æŠ€æœ¯ Hibernate</a>    <ul>
      <li><a href="#hibernate-ç®€ä»‹" id="markdown-toc-hibernate-ç®€ä»‹">Hibernate ç®€ä»‹</a></li>
      <li><a href="#hibernate-å…¥é—¨" id="markdown-toc-hibernate-å…¥é—¨">Hibernate å…¥é—¨</a>        <ul>
          <li><a href="#hibernate-é…ç½®æ–‡ä»¶" id="markdown-toc-hibernate-é…ç½®æ–‡ä»¶">Hibernate é…ç½®æ–‡ä»¶</a></li>
          <li><a href="#äº†è§£å¹¶ç¼–å†™æŒä¹…åŒ–ç±»" id="markdown-toc-äº†è§£å¹¶ç¼–å†™æŒä¹…åŒ–ç±»">äº†è§£å¹¶ç¼–å†™æŒä¹…åŒ–ç±»</a></li>
          <li><a href="#hibernate-æ˜ å°„" id="markdown-toc-hibernate-æ˜ å°„">Hibernate æ˜ å°„</a></li>
        </ul>
      </li>
      <li><a href="#hibernate-æ•°æ®æŒä¹…åŒ–" id="markdown-toc-hibernate-æ•°æ®æŒä¹…åŒ–">Hibernate æ•°æ®æŒä¹…åŒ–</a></li>
    </ul>
  </li>
</ul>

<p>ç®€å•ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>

<figure class="highlight"><pre><code class="language-jsp" data-lang="jsp"><span class="nt">&lt;%@ page </span><span class="na">language=</span><span class="s">"java"</span><span class="na"> contentType=</span><span class="s">"text/html; charset=UTF-8"</span> <span class="nt">%&gt;</span>
<span class="nt">&lt;%@ page  </span><span class="na">pageEncoding=</span><span class="s">"UTF-8"</span> <span class="nt">%&gt;</span>
<span class="nt">&lt;%@ page </span><span class="na">import=</span><span class="s">"java.util.Date"</span> <span class="nt">%&gt;</span>
<span class="nt">&lt;%@ page </span><span class="na">import=</span><span class="s">"java.text.SimpleDateFormat"</span> <span class="nt">%&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">"Content-Type"</span> <span class="na">content=</span><span class="s">"text/html;charset=UTF-8"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;title&gt;</span>ä¸€ä¸ªç®€å•çš„jspé¡µé¢----æ˜¾ç¤ºç³»ç»Ÿæ—¶é—´<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
<span class="nt">&lt;%</span>
    <span class="nc">Date</span> <span class="n">date</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Date</span><span class="o">();</span>
    <span class="nc">SimpleDateFormat</span> <span class="n">df</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SimpleDateFormat</span><span class="o">(</span><span class="s">"yyyy-MM-dd HH:mm:ss"</span><span class="o">);</span>
    <span class="nc">String</span> <span class="n">today</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">date</span><span class="o">);</span>
<span class="nt">%&gt;</span>
å½“å‰æ—¶é—´ï¼š<span class="nt">&lt;%=</span><span class="n">today</span><span class="nt">%&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span></code></pre></figure>

<p><img src="/assets/img/java_jsp/jsp-basic-01.png" alt="JSPç®€å•ç¤ºä¾‹" /></p>

<p>æ³¨æ„ï¼šå¤åˆ¶è¯¥ä»£ç åå¿…é¡»ä¿å­˜ä¸º UTF-8 ç¼–ç æ ¼å¼ï¼ˆå› ä¸ºä»£ç ä¸­è¦æ±‚ UTF-8 æ ¼å¼ï¼‰ï¼Œå¦åˆ™ä¼šå‡ºç°ä¹±ç ï¼</p>

<h1 id="jsp-å¼€å‘ç¯å¢ƒé…ç½®">JSP å¼€å‘ç¯å¢ƒé…ç½®</h1>

<ul>
  <li>é…ç½®Javaå¼€å‘ç¯å¢ƒï¼Œè‡ªè¡ŒæŸ¥é˜…</li>
  <li>
    <p>é…ç½®webå®¹å™¨tomcatç¯å¢ƒå˜é‡ï¼š</p>

    <p>å°† tomcat çš„ lib è·¯å¾„é…ç½®åˆ° CLASSPATHï¼ˆåŒ Java ç¯å¢ƒå˜é‡ï¼‰å˜é‡ä¸­ã€‚å¦‚æœè‡ªå·±çš„é¡¹ç›®ç›®å½•ä¸º mywebï¼Œéœ€è¦å°†å…¶æ•´ä½“æ”¾åˆ° tomcat
å®‰è£…ç›®å½•ä¸‹çš„ webapps ç›®å½•ä¸‹ï¼Œå¹¶ä¸” myweb ç›®å½•ä¸‹éœ€è¦æœ‰ META-INF ç›®å½•ã€WEB-INF ç›®å½•ï¼ˆè¯¥ç›®å½•ä¸‹æœ‰ classes ç›®å½•ã€lib ç›®å½•ã€src ç›®å½•ã€jsp ç›®å½•ã€jsp2 ç›®å½•ã€tags ç›®å½•ã€web.xml æ–‡ä»¶ã€
database. properties æ•°æ®åº“é…ç½®æ–‡ä»¶ç­‰ï¼‰ã€è‡ªå·±ç¼–å†™çš„ index.jsp(å¯ä»¥ä¸è¿™æ ·å‘½åï¼Œä¸ä¹‹é…å¥—çš„æ˜¯ï¼Œéœ€è¦åœ¨æµè§ˆå™¨åœ°å€æ ä¸­è¾“å…¥ http://localhost:8080/myweb/index.jsp)æ–‡ä»¶ç­‰</p>
  </li>
  <li>é€‰æ‹©è‡ªèº«ç†Ÿæ‚‰çš„ç¼–è¾‘å™¨ï¼Œå¦‚ vim</li>
</ul>

<h1 id="jspè¿è¡ŒåŸç†">JSPè¿è¡ŒåŸç†</h1>

<p>å½“ JSP æ–‡ä»¶è¢«éƒ¨ç½²åˆ° Web åº”ç”¨æœåŠ¡å™¨ä¸­åï¼Œå¹¶ä¸èƒ½ç›´æ¥å›åº”ç»™æµè§ˆå™¨ã€‚å®ƒçš„è¿è¡Œéœ€è¦ç»å† 4 ä¸ªå…³é”®çš„é˜¶æ®µï¼Œå¦‚å›¾æ‰€ç¤º
<img src="/assets/img/java_jsp/jsp-basic-02.png" alt="JSPè¿è¡ŒåŸç†" /></p>

<p>å½“æµè§ˆå™¨å‘ Web åº”ç”¨æœåŠ¡å™¨è¯·æ±‚ä¸€ä¸ª JSP é¡µé¢æ—¶ï¼ŒWebåº”ç”¨æœåŠ¡å™¨å°†å…¶è½¬æ¢ä¸ºä¸€ä¸ª Servlet æ–‡ä»¶ï¼ˆå³ä¸€ä¸ª .java æ–‡ä»¶ï¼‰ï¼Œç„¶åå°†è¿™ä¸ª Java æ–‡ä»¶ç¼–è¯‘æˆ
ä¸€ä¸ªå­—èŠ‚ç æ–‡ä»¶ï¼ˆå³ä¸€ä¸ª.class æ–‡ä»¶ï¼‰ï¼Œæœ€åWebåº”ç”¨æœåŠ¡å™¨åŠ è½½è½¬æ¢åçš„ Servlet ç¤ºä¾‹ï¼Œå¤„ç†å®¢æœç«¯çš„è¯·æ±‚ï¼Œå¹¶è¿”å› HTML æ ¼å¼çš„å“åº”ç»™å®¢æœç«¯
æµè§ˆå™¨ã€‚</p>

<h1 id="jspç¼–è¯‘æŒ‡ä»¤æ ‡è¯†">JSPç¼–è¯‘æŒ‡ä»¤æ ‡è¯†</h1>

<p>JSP ç¼–è¯‘æŒ‡ä»¤ç”¨äºè½¬è¯‘ï¼ˆJSP æ–‡ä»¶ç¿»è¯‘æˆ Java æ–‡ä»¶ï¼‰é˜¶æ®µã€‚å…¶ä¸»è¦ç”¨äºè®¾å®šæ•´ä¸ª JSP é¡µé¢èŒƒå›´å†…éƒ½æœ‰æ•ˆçš„ç›¸å…³ä¿¡æ¯ï¼Œè¿™äº›æ ‡è¯†ä¼šè¢«æœåŠ¡å™¨è§£é‡Šæ‰§è¡Œï¼Œä½†ä¸ä¼šäº§ç”Ÿä»»ä½•å†…å®¹è¾“å‡ºåˆ°ç½‘é¡µä¸­ã€‚</p>

<p>JSP ä¸­åŒ…å«äº† pageã€include å’Œ taglib 3 ä¸ªæŒ‡ä»¤æ ‡è¯†ã€‚è¿™ 3 ä¸ªæŒ‡ä»¤æ ‡è¯†çš„è¯­æ³•ç»“æ„æ˜¯ç›¸åŒçš„ï¼Œå…¶å®šä¹‰çš„æ–¹æ³•å¦‚ä¸‹(å…·ä½“ä½¿ç”¨æ–¹æ³•è¯·å‚è€ƒå‰é¢çš„ç¤ºä¾‹):</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;%@ æŒ‡ä»¤å å±æ€§1="å±æ€§å€¼1" å±æ€§2="å±æ€§å€¼2" ......%&gt;
</code></pre></div></div>

<h2 id="é¡µé¢æŒ‡ä»¤pageçš„ä½¿ç”¨">é¡µé¢æŒ‡ä»¤pageçš„ä½¿ç”¨</h2>

<p>page æ˜¯ JSP é¡µé¢ä¸­æœ€å¸¸ç”¨çš„æŒ‡ä»¤ï¼Œä¹Ÿæ˜¯ä¸€ä¸ª JSP é¡µé¢ä¸­å¿…é¡»ç”¨åˆ°çš„ä¸€ä¸ªæŒ‡ä»¤ã€‚å®ƒç”¨äºå®šä¹‰ä¸æ•´ä¸ª JSP é¡µé¢ç›¸å…³çš„å±æ€§ï¼Œå¦‚ JSP é¡µé¢çš„ç¼–ç ã€å†…å®¹ç±»å‹ã€
å¼•ç”¨çš„ç±»åº“ç­‰ã€‚è¯¥æŒ‡ä»¤æä¾›äº†<code class="language-plaintext highlighter-rouge">languageã€contentTypeã€pageEncodingã€importã€autoFlushã€bufferã€errorPageã€extendsã€infoã€isELIgnoredã€
isErrorPageã€isThreadSafeå’Œsession</code>å…± 13 ä¸ªå±æ€§ï¼Œåœ¨å®é™…ç¼–ç¨‹ä¸­ï¼Œè¿™äº›å±æ€§å¹¶ä¸éœ€è¦ä¸€ä¸€åˆ—å‡ºï¼ˆæœ‰é»˜è®¤å€¼ï¼‰ï¼Œå…¶ä¸­å¾ˆå¤šå±æ€§å¯ä»¥çœç•¥ã€‚å±æ€§çš„
å…·ä½“ç”¨æ³•è¯·å‚è€ƒå…¶ä»–èµ„æ–™ã€‚ç›¸è¿‘çš„å±æ€§æ³¨æ„åŒºåˆ«ï¼Œéœ€è¦æŒ‡å‡ºçš„æ˜¯ï¼ŒpageæŒ‡ä»¤æŒ‡çš„æ˜¯è¯¥JSPé¡µé¢ï¼Œè€Œä¸æ˜¯ HTML é¡µé¢ï¼Œæ¢å¥è¯è¯´ï¼Œä¸€ä¸ª HTML é¡µé¢ä¸­å¯ä»¥
åŒ…å«å¤šä¸ª JSP é¡µé¢ï¼Œä¸åŒçš„ JSP é¡µé¢å¯ä»¥è®¾ç½®ä¸åŒçš„ page å±æ€§ã€‚å¦‚ï¼š
<img src="/assets/img/java_jsp/jsp-basic-03.png" alt="å±æ€§åŒºåˆ«" /></p>

<h2 id="æ–‡ä»¶åŒ…å«æŒ‡ä»¤includeçš„ä½¿ç”¨">æ–‡ä»¶åŒ…å«æŒ‡ä»¤includeçš„ä½¿ç”¨</h2>

<p>include å¯ä»¥å°†ä¸€ä¸ªJSPé¡µé¢åŒ…å«åˆ°å¦ä¸€ä¸ªJSPé¡µé¢ä¸­ï¼Œä»è€Œå®ç°åŠŸèƒ½åˆ’åˆ†ï¼Œè¿›è€Œå®ç°JSPé¡µé¢çš„é‡ç”¨ï¼Œä¾¿äºç»´æŠ¤ã€‚å…¶æœºç†å¦‚å›¾ï¼š
<img src="/assets/img/java_jsp/jsp-basic-04.png" alt="includeæœºç†" /></p>

<h2 id="å¼•ç”¨æ ‡ç­¾åº“æŒ‡ä»¤taglibçš„ä½¿ç”¨">å¼•ç”¨æ ‡ç­¾åº“æŒ‡ä»¤taglibçš„ä½¿ç”¨</h2>

<p>taglib æŒ‡ä»¤ç”¨äºå£°æ˜ä¸€ä¸ªæ ‡ç­¾çš„å¼•ç”¨ï¼Œåœ¨ JSP é¡µé¢ä¹‹ä¸­å£°æ˜äº†å“ªä¸ªæ ‡ç­¾åº“çš„å¼•ç”¨ï¼Œå°±å¯ä»¥åœ¨ JSP é¡µé¢ä¸­è°ƒç”¨å“ªä¸ªæ ‡ç­¾ã€‚</p>

<h1 id="ä½¿ç”¨jspè„šæœ¬">ä½¿ç”¨JSPè„šæœ¬</h1>

<p>JSP ä¹‹æ‰€ä»¥åº”ç”¨çµæ´»ï¼Œå…¶ä¸»è¦åŸå› æ˜¯ JSP é¡µé¢ä¸­å¯ä»¥å¾ˆæ–¹ä¾¿åœ°è°ƒç”¨ Java ä»£ç æˆ–è„šæœ¬ä»£ç æ¥å®ç°ä¸€äº›åŠŸèƒ½ã€‚JSP ä¸­çš„è„šæœ¬æ ‡è¯†åŒ…æ‹¬ JSP è¡¨è¾¾å¼ã€
å£°æ˜æ ‡è¯†å’Œè„šæœ¬ç¨‹åºã€‚é€šè¿‡è¿™äº›æ ‡è¯†ï¼Œåœ¨ JSP é¡µé¢ä¸­å¯ä»¥åƒç¼–å†™ Java ç¨‹åºä¸€æ ·å£°æ˜å˜é‡ï¼Œå®šä¹‰æ–¹æ³•ï¼Œæˆ–è€…è¿›è¡Œå„ç§è¡¨è¾¾å¼çš„è¿ç®—ã€‚</p>

<h2 id="åœ¨jspä¸­åº”ç”¨ä»£ç ç‰‡æ®µ">åœ¨JSPä¸­åº”ç”¨ä»£ç ç‰‡æ®µ</h2>

<p>æ‰€è°“ä»£ç ç‰‡æ®µæ˜¯æŒ‡ JSP é¡µé¢ä¸­åµŒå…¥çš„ Java ä»£ç æˆ–è„šæœ¬ä»£ç ã€‚ä»£ç ç‰‡æ®µåœ¨é¡µé¢è¯·æ±‚çš„å¤„ç†æœŸé—´è¢«æ‰§è¡Œï¼Œé€šè¿‡ Java ä»£ç å¯ä»¥å®šä¹‰å˜é‡æˆ–æ˜¯æµç¨‹æ§åˆ¶è¯­å¥ç­‰ï¼›
è€Œé€šè¿‡è„šæœ¬ä»£ç å¯ä»¥åº”ç”¨ JSP çš„å†…ç½®å¯¹è±¡åœ¨é¡µé¢è¾“å‡ºå†…å®¹ï¼Œå¤„ç†è¯·æ±‚å’Œå“åº”ï¼Œè®¿é—® session ä¼šè¯ç­‰ã€‚ä»£ç ç‰‡æ®µçš„è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;% Javaä»£ç æˆ–æ˜¯è„šæœ¬ä»£ç  %&gt;
</code></pre></div></div>

<h2 id="ä½¿ç”¨jspè¡¨è¾¾å¼">ä½¿ç”¨JSPè¡¨è¾¾å¼</h2>

<p>JSP è¡¨è¾¾å¼ç”¨äºå‘é¡µé¢ä¸­è¾“å‡ºä¿¡æ¯ï¼Œä»–å¯ä»¥æ’å…¥åˆ°ç½‘é¡µçš„æ–‡æœ¬ä¸­ï¼Œç”¨äºè¾“å‡ºæ–‡æœ¬å†…å®¹ï¼Œä¹Ÿå¯ä»¥æ’å…¥åˆ° HTML æ ‡è®°ä¸­ï¼Œç”¨äºåŠ¨æ€è®¾ç½®å±æ€§å€¼ã€‚JSP è¡¨è¾¾å¼çš„è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;% = è¡¨è¾¾å¼ %&gt;
</code></pre></div></div>

<p>å…·ä½“ç¤ºä¾‹å¦‚ä¸‹:
<img src="/assets/img/java_jsp/jsp-basic-05.png" alt="è¡¨è¾¾å¼ç¤ºä¾‹" /></p>

<h2 id="å£°æ˜æ ‡è¯†çš„ä½¿ç”¨">å£°æ˜æ ‡è¯†çš„ä½¿ç”¨</h2>

<p>ä½¿ç”¨å£°æ˜æ ‡è¯†åœ¨JSPé¡µé¢ä¸­å®šä¹‰å˜é‡æˆ–æ–¹æ³•æ˜¯å…¨å±€çš„ï¼ŒåŒæ—¶è¦æ±‚éµå¾ª Java è¯­è¨€çš„è¯­æ³•ã€‚å£°æ˜æ ‡è¯†çš„è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;%! å£°æ˜å˜é‡æˆ–æ–¹æ³•çš„ä»£ç  %&gt;
</code></pre></div></div>

<p>ç¤ºä¾‹å¦‚ä¸‹ï¼š
<img src="/assets/img/java_jsp/jsp-basic-06.png" alt="" /></p>

<p><img src="/assets/img/java_jsp/jsp-basic-07.png" alt="" /></p>

<h2 id="æ³¨é‡Šçš„ä½¿ç”¨">æ³¨é‡Šçš„ä½¿ç”¨</h2>

<p>JSPé¡µé¢ä¸­çš„HTMLä»£ç æ³¨é‡ŠåŒHTMLæ³¨é‡Šï¼ŒJavaæˆ–è„šæœ¬ä»£ç ç‰‡æ®µæ³¨é‡ŠåŒJavaæ³¨é‡Šè§„èŒƒï¼ŒJSPç‰¹æœ‰çš„éšè—æ³¨é‡Šå¦‚ä¸‹ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;%-- æ³¨é‡Šå†…å®¹  --%&gt;
</code></pre></div></div>

<p><img src="/assets/img/java_jsp/jsp-basic-08.png" alt="éšè—æ³¨é‡Š" /></p>

<h1 id="jspåŠ¨ä½œæŒ‡ä»¤æ ‡ç­¾æˆ–å…ƒç´ æˆ–æ ‡è¯†">JSPåŠ¨ä½œæŒ‡ä»¤ï¼ˆæ ‡ç­¾æˆ–å…ƒç´ æˆ–æ ‡è¯†ï¼‰</h1>

<p>å…¶ç”¨äºè¯·æ±‚å¤„ç†é˜¶æ®µï¼ˆè§å‰é¢çš„JSPå¤„ç†è¿‡ç¨‹å›¾ï¼‰æä¾›ä¿¡æ¯ï¼Œåˆ©ç”¨ JSP åŠ¨ä½œå¯ä»¥åŠ¨æ€åœ°æ’å…¥æ–‡ä»¶ã€é‡ç”¨ Java Bean ç»„ä»¶ã€æŠŠç”¨æˆ·é‡å®šå‘åˆ°å¦å¤–çš„é¡µé¢ã€
ä¸º Java æ’ä»¶ç”Ÿæˆ HTML ä»£ç ã€‚è¿™äº›åŠ¨ä½œå°†æ ¹æ®è¯·æ±‚å¤„ç†é˜¶æ®µåœ¨é¡µé¢ä¸­å‡ºç°çš„é¡ºåºæ¥æ‰§è¡Œã€‚ç”±äº JSP åŠ¨ä½œæŒ‡ä»¤æ˜¯åŸºäº XML è¯­æ³•å®ç°çš„ï¼Œæ‰€ä»¥åœ¨ JSP é¡µé¢ä¸­ï¼Œ
åªéœ€è¦éµå¾ª XML è¯­æ³•è¿›è¡Œè°ƒç”¨å³å¯ã€‚</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;åŠ¨ä½œæŒ‡ä»¤å å±æ€§1="å€¼1" å±æ€§2="å€¼2" ... /&gt;
</code></pre></div></div>

<p>æˆ–è€…</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;åŠ¨ä½œæ ‡è¯†å å±æ€§1="å€¼1" å±æ€§2="å€¼2" ...&gt;
  &lt;å­æ ‡è¯†å å±æ€§1="å€¼1" å±æ€§2="å€¼2" .../&gt;
  ... &lt;!--å¤šä¸ªå­æ ‡è¯†--&gt;
&lt;/åŠ¨ä½œæ ‡è¯†å&gt;
</code></pre></div></div>

<p>ä¸ºå…·ä½“äº†è§£JSPåŠ¨ä½œæŒ‡ä»¤å¤„ç†è¿‡ç¨‹ï¼Œå¦‚ä¸‹ä»¥ <code class="language-plaintext highlighter-rouge">&lt;jsp:include&gt;</code> æŒ‡ä»¤ä¸ºä¾‹ï¼Œå¦‚å›¾ï¼š</p>

<p><img src="/assets/img/java_jsp/jsp-basic-09.png" alt="jsp:includeå¤„ç†è¿‡ç¨‹" /></p>

<p>è¯·æ ¹æ®å¦‚ä¸‹ç¤ºä¾‹(ç»“åˆå‰é¢çš„JSPé¡µé¢å¤„ç†è¿‡ç¨‹å›¾)è‡ªè¡Œä½“ä¼šJSPç¼–è¯‘æŒ‡ä»¤å’ŒåŠ¨ä½œæŒ‡ä»¤çš„åŒºåˆ«ï¼š</p>

<p><img src="/assets/img/java_jsp/jsp-basic-10.png" alt="JSPç¼–è¯‘æŒ‡ä»¤ä¸åŠ¨ä½œæŒ‡ä»¤çš„åŒºåˆ«" /></p>

<h1 id="jspå†…ç½®å¯¹è±¡">JSPå†…ç½®å¯¹è±¡</h1>

<p>JSP å†…ç½®å¯¹è±¡ç”±å®¹å™¨å®ç°å’Œç®¡ç†ï¼Œä¸éœ€è¦ JSP é¡µé¢ç¼–ç¨‹è¿›è¡Œå®ä¾‹åŒ–ï¼Œåœ¨æ‰€æœ‰ JSP é¡µé¢ä¸­éƒ½å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œèµ·åˆ°äº†ç®€åŒ–é¡µé¢çš„ä½œç”¨ã€‚
JSPæä¾›äº† request å¯¹è±¡ã€response å¯¹è±¡ã€session å¯¹è±¡ã€application å¯¹è±¡ã€out å¯¹è±¡ã€page å¯¹è±¡ã€config å¯¹è±¡ã€exception å¯¹è±¡å’Œ
 pageContent å¯¹è±¡ç­‰ 9 ä¸ªå†…ç½®å¯¹è±¡ã€‚å†…ç½®å¯¹è±¡ä¸æ™®é€šå¯¹è±¡çš„åŒºåˆ«å¦‚ä¸‹å›¾ï¼š</p>

<p><img src="/assets/img/java_jsp/jsp-basic-11.png" alt="å†…ç½®å¯¹è±¡åŒºåˆ«äºæ™®é€šå¯¹è±¡" /></p>

<p><img src="/assets/img/java_jsp/jsp-basic-12.png" alt="éœ€è¦å†…ç½®å¯¹è±¡" /></p>

<h1 id="jspé¢å‘å¯¹è±¡-javabeanæŠ€æœ¯">JSPé¢å‘å¯¹è±¡-JavaBeanæŠ€æœ¯</h1>

<p>JavaBean çš„äº§ç”Ÿï¼Œä½¿ JSP é¡µé¢ä¸­çš„ä¸šåŠ¡é€»è¾‘å˜å¾—æ›´åŠ æ¸…æ™°ï¼Œç¨‹åºä¹‹ä¸­çš„å®ä½“å¯¹è±¡åŠä¸šåŠ¡é€»è¾‘å¯ä»¥è¢«å•ç‹¬å°è£…åˆ° java ç±»ä¸­ï¼ŒJSP é¡µé¢
é€šè¿‡è‡ªèº«æ“ä½œ JavaBean çš„åŠ¨ä½œæ ‡è¯†å¯¹å…¶è¿›è¡Œæ“ä½œï¼Œæ”¹å˜äº† HTML ç½‘é¡µä»£ç ä¸ Java ä»£ç æ··ä¹±çš„ç¼–å†™æ–¹å¼ï¼Œè¿™ä¸ä»…æé«˜äº†ç¨‹åºçš„å¯è¯»æ€§ã€
æ˜“ç»´æŠ¤æ€§ã€è¿˜æé«˜äº†ä»£ç çš„é‡ç”¨æ€§ã€‚</p>

<p>çº¯ JSP å¼€å‘æ–¹å¼å’Œ JSP-JavaBean å¼€å‘æ–¹å¼çš„åŒºåˆ«å¦‚ä¸‹å›¾ï¼š</p>

<p><img src="/assets/img/java_jsp/jsp-basic-13.png" alt="çº¯JSPå¼€å‘æ–¹å¼" /></p>

<p><img src="/assets/img/java_jsp/jsp-basic-14.png" alt="JSP-JavaBeanå¼€å‘æ–¹å¼" />
ä½¿ç”¨ JSP-JavaBean å¼€å‘æ–¹å¼å¿…é¡»éµå¾ª JavaBean è§„èŒƒï¼Œè¯¥è§„èŒƒè¯·è‡ªè¡ŒæŸ¥é˜…ã€‚
<img src="/assets/img/java_jsp/jsp-basic-15.png" alt="JavaBeanè§„èŒƒ" /></p>

<p>ä»¥ä¸‹æ˜¯ JSP-JavaBean å¼€å‘æ–¹å¼çš„ä¸€ä¸ªç¤ºä¾‹ï¼š</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="nn">com.lyq.bean</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.text.SimpleDateFormat</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Calendar</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Date</span><span class="o">;</span>
<span class="cm">/**
 * è·å–å½“å‰æ—¶é—´çš„JavaBean
 * @author Li YongQiang
 */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">DateBean</span> <span class="o">{</span>
	<span class="c1">// æ—¥æœŸåŠæ—¶é—´</span>
	<span class="kd">private</span> <span class="nc">String</span> <span class="n">dateTime</span><span class="o">;</span>
	<span class="c1">// æ˜ŸæœŸ</span>
	<span class="kd">private</span> <span class="nc">String</span> <span class="n">week</span><span class="o">;</span>
	<span class="cm">/**
	 * è·å–å½“å‰æ—¥æœŸåŠæ—¶é—´
	 * @return æ—¥æœŸåŠæ—¶é—´çš„å­—ç¬¦ä¸²
	 */</span>
	<span class="kd">public</span> <span class="nc">String</span> <span class="nf">getDateTime</span><span class="o">()</span> <span class="o">{</span>
		<span class="c1">// è·å–å½“å‰æ—¶é—´</span>
		<span class="nc">Date</span> <span class="n">currDate</span> <span class="o">=</span> <span class="nc">Calendar</span><span class="o">.</span><span class="na">getInstance</span><span class="o">().</span><span class="na">getTime</span><span class="o">();</span>
		<span class="c1">// å®ä¾‹åŒ–SimpleDateFormat</span>
		<span class="nc">SimpleDateFormat</span> <span class="n">sdf</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SimpleDateFormat</span><span class="o">(</span><span class="s">"yyyyå¹´MMæœˆddæ—¥ã€€HHç‚¹mmåˆ†ssç§’"</span><span class="o">);</span>
		<span class="c1">// æ ¼å¼åŒ–æ—¥æœŸæ—¶é—´</span>
		<span class="n">dateTime</span> <span class="o">=</span> <span class="n">sdf</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">currDate</span><span class="o">);</span>
		<span class="c1">// è¿”å›æ—¥æœŸåŠæ—¶é—´çš„å­—ç¬¦ä¸²</span>
		<span class="k">return</span> <span class="n">dateTime</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="cm">/**
	 * è·å–æ˜ŸæœŸå‡ 
	 * @return è¿”å›æ˜ŸæœŸå­—ç¬¦ä¸²
	 */</span>
	<span class="kd">public</span> <span class="nc">String</span> <span class="nf">getWeek</span><span class="o">()</span> <span class="o">{</span>
		<span class="c1">// å®šä¹‰æ•°ç»„</span>
		<span class="nc">String</span><span class="o">[]</span> <span class="n">weeks</span> <span class="o">=</span> <span class="o">{</span> <span class="s">"æ˜ŸæœŸæ—¥"</span><span class="o">,</span> <span class="s">"æ˜ŸæœŸä¸€"</span><span class="o">,</span> <span class="s">"æ˜ŸæœŸäºŒ"</span><span class="o">,</span> <span class="s">"æ˜ŸæœŸä¸‰"</span><span class="o">,</span> <span class="s">"æ˜ŸæœŸå››"</span><span class="o">,</span> <span class="s">"æ˜ŸæœŸäº”"</span><span class="o">,</span> <span class="s">"æ˜ŸæœŸå…­"</span> <span class="o">};</span>
		<span class="c1">// è·å–ä¸€æ˜ŸæœŸçš„æŸå¤©</span>
		<span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="nc">Calendar</span><span class="o">.</span><span class="na">getInstance</span><span class="o">().</span><span class="na">get</span><span class="o">(</span><span class="nc">Calendar</span><span class="o">.</span><span class="na">DAY_OF_WEEK</span><span class="o">);</span>
		<span class="c1">// è·å–æ˜ŸæœŸå‡ </span>
		<span class="n">week</span> <span class="o">=</span> <span class="n">weeks</span><span class="o">[</span><span class="n">index</span> <span class="o">-</span> <span class="mi">1</span><span class="o">];</span>
		<span class="c1">// è¿”å›æ˜ŸæœŸå­—ç¬¦ä¸²</span>
		<span class="k">return</span> <span class="n">week</span><span class="o">;</span>
	<span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>å°†ä»¥ä¸Šä»£ç ä¿å­˜ä¸º DateTime.java æ–‡ä»¶ï¼Œç¼–è¯‘é€šè¿‡åç”Ÿæˆçš„ .class æ–‡ä»¶ï¼ˆå¸¦åŒ…éœ€è¦å°†åŒ…ä¸€èµ·ï¼Œå¦‚æœ¬å¤„éœ€è¦å°† com æ–‡ä»¶å¤¹ä¸€èµ·ï¼‰æ‹·è´åˆ° classesï¼ˆè§å‰é¢çš„JSPå¼€å‘ç¯å¢ƒï¼‰ç›®å½•ä¸‹</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;</span><span class="err">%@</span> <span class="na">page</span> <span class="na">language=</span><span class="s">"java"</span> <span class="na">contentType=</span><span class="s">"text/html; charset=UTF-8"</span>
    <span class="na">pageEncoding=</span><span class="s">"UTF-8"</span><span class="err">%</span><span class="nt">&gt;</span>
<span class="cp">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">"Content-Type"</span> <span class="na">content=</span><span class="s">"text/html; charset=UTF-8"</span><span class="nt">&gt;</span>
<span class="nt">&lt;title&gt;</span>ç”µå­æ—¶é’Ÿ<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;style </span><span class="na">type=</span><span class="s">"text/css"</span><span class="nt">&gt;</span>
	<span class="nf">#clock</span><span class="p">{</span>
		<span class="nl">width</span><span class="p">:</span><span class="m">420px</span><span class="p">;</span>
		<span class="nl">height</span><span class="p">:</span><span class="m">80px</span><span class="p">;</span>
		<span class="nl">background</span><span class="p">:</span><span class="m">#E0E0E0</span><span class="p">;</span>
		<span class="nl">font-size</span><span class="p">:</span> <span class="m">25px</span><span class="p">;</span>
		<span class="nl">font-weight</span><span class="p">:</span> <span class="nb">bold</span><span class="p">;</span>
		<span class="nl">border</span><span class="p">:</span> <span class="nb">solid</span> <span class="m">5px</span> <span class="no">orange</span><span class="p">;</span>
		<span class="nl">padding</span><span class="p">:</span> <span class="m">20px</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="nf">#week</span><span class="p">{</span>
		<span class="nl">padding-top</span><span class="p">:</span><span class="m">15px</span><span class="p">;</span>
		<span class="nl">color</span><span class="p">:</span> <span class="m">#0080FF</span><span class="p">;</span>
	<span class="p">}</span>
<span class="nt">&lt;/style&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">"Refresh"</span> <span class="na">content=</span><span class="s">"1"</span><span class="nt">&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
	<span class="nt">&lt;jsp:useBean</span> <span class="na">id=</span><span class="s">"date"</span> <span class="na">class=</span><span class="s">"com.lyq.bean.DateBean"</span> <span class="na">scope=</span><span class="s">"application"</span><span class="nt">&gt;&lt;/jsp:useBean&gt;</span>
	<span class="nt">&lt;div</span> <span class="na">align=</span><span class="s">"center"</span><span class="nt">&gt;</span>
		<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"clock"</span><span class="nt">&gt;</span>
			<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"time"</span><span class="nt">&gt;</span>
				<span class="nt">&lt;jsp:getProperty</span> <span class="na">property=</span><span class="s">"dateTime"</span> <span class="na">name=</span><span class="s">"date"</span><span class="nt">/&gt;</span>
			<span class="nt">&lt;/div&gt;</span>
			<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"week"</span><span class="nt">&gt;</span>
				<span class="nt">&lt;jsp:getProperty</span> <span class="na">property=</span><span class="s">"week"</span> <span class="na">name=</span><span class="s">"date"</span><span class="nt">/&gt;</span>
			<span class="nt">&lt;/div&gt;</span>
		<span class="nt">&lt;/div&gt;</span>
	<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span></code></pre></figure>

<p>å°†ä»¥ä¸Šä»£ç ä¿å­˜ä¸º index.jsp æ–‡ä»¶æ”¾åœ¨ myweb ç›®å½•ä¸‹ï¼Œç„¶åå¯åŠ¨ tomcat æœåŠ¡ï¼ˆè¿›å…¥ tomcat å®‰è£…ç›®å½•ä¸‹çš„ bin ç›®å½•ï¼Œè¿è¡Œ starup.batï¼‰,
ä¹‹ååœ¨æµè§ˆå™¨åœ°å€æ è¾“å…¥http://localhost:8080/myweb/index.jspï¼Œä¸å‡ºæ„å¤–å°±å¯ä»¥çœ‹åˆ°æ—¶é’Ÿæ•ˆæœã€‚</p>

<h1 id="servletæŠ€æœ¯">ServletæŠ€æœ¯</h1>

<p>Servlet æ˜¯ç”¨ Java è¯­è¨€ç¼–å†™åº”ç”¨åˆ° Web æœåŠ¡å™¨ç«¯çš„æ‰©å±•æŠ€æœ¯ï¼Œå®ƒå…ˆäº JSP äº§ç”Ÿï¼Œå¯ä»¥æ–¹ä¾¿åœ°å¯¹ Web åº”ç”¨ä¸­çš„ Http è¯·æ±‚è¿›è¡Œå¤„ç†ã€‚åœ¨ Java Web 
ç¨‹åºå¼€å‘ä¸­ï¼ŒServlet ä¸»è¦ç”¨äºå„ç§ä¸šåŠ¡é€»è¾‘ï¼Œå®ƒæ¯” JSP æ›´å…·æœ‰ä¸šåŠ¡é€»è¾‘å±‚çš„æ„ä¹‰ï¼Œè€Œä¸” Servlet çš„å®‰å…¨æ€§ã€æ‰©å±•æ€§åŠæ€§èƒ½éƒ½ååˆ†ä¼˜ç§€ï¼Œ
å®ƒåœ¨ Java Web ç¨‹åºå¼€å‘åŠ MVC æ¨¡å¼çš„åº”ç”¨æ–¹é¢èµ·åˆ°äº†æå…¶é‡è¦çš„ä½œç”¨ã€‚</p>

<p>Servlet ä¸æ™®é€š Java ç¨‹åºçš„åŒºåˆ«æ˜¯ï¼šServlet å¯¹è±¡å…·æœ‰å¯¹ HTTP è¯·æ±‚çš„å¤„ç†åŠŸèƒ½ï¼Œå¹¶ä¸”å…¶è¿è¡Œéœ€è¦ Web å®¹å™¨çš„æ”¯æŒã€‚åœ¨å‰é¢è®²è§£çš„ JSP æŠ€æœ¯ä¸­ï¼Œ
JSP çš„è¿è¡Œä¹ŸåŒæ ·éœ€è¦ Web å®¹å™¨çš„æ”¯æŒï¼Œä¸€ä¸ª JSP æ–‡ä»¶æ˜¯å°†å…¶è½¬æ¢ä¸º Servlet ä¹‹åè€Œè¿è¡Œçš„ï¼ŒWeb å®¹å™¨ï¼ˆTomcatï¼‰æœ€ç»ˆè¿è¡Œçš„æ˜¯ä¸€ä¸ª Servletï¼Œ
è€Œä¸æ˜¯ JSPã€‚</p>

<p><img src="/assets/img/java_jsp/jsp-basic-16.png" alt="Servletä¸JSP" /></p>

<h2 id="servleté…ç½®è§£æ">Servleté…ç½®è§£æ</h2>

<p>åˆ›å»ºäº† Servlet ç±»åï¼Œè¿˜éœ€è¦å¯¹ Servlet è¿›è¡Œé…ç½®ï¼Œç›®çš„æ˜¯å°†åˆ›å»ºçš„ Servlet æ³¨å†Œåˆ° Servlet å®¹å™¨ä¹‹ä¸­ï¼Œä»¥æ–¹ä¾¿ Servlet å®¹å™¨å¯¹ Servlet çš„è°ƒç”¨ã€‚
éœ€è¦å°† Servlet é…ç½®åˆ° web.xml æ–‡ä»¶ä¸­ã€‚å…·ä½“çœ‹åé¢çš„ä¾‹å­ã€‚</p>

<p>Servlet çš„é…ç½®è›€ç‰™é€šè¿‡<code class="language-plaintext highlighter-rouge">&lt;servlet&gt;</code>æ ‡ç­¾ä¸<code class="language-plaintext highlighter-rouge">&lt;servlet-mapping&gt;</code>æ ‡ç­¾è¿›è¡Œé…ç½®ï¼Œ<code class="language-plaintext highlighter-rouge">&lt;servlet&gt;</code>æ ‡ç­¾ç”¨äºå£°æ˜ä¸€ä¸ª Servlet å¯¹è±¡ï¼Œ<code class="language-plaintext highlighter-rouge">&lt;servlet-mapping&gt;</code>
æ ‡ç­¾ç”¨äºé…ç½®Servletçš„æ˜ å°„ã€‚</p>

<p><code class="language-plaintext highlighter-rouge">&lt;servlet&gt;</code>æ ‡ç­¾ä¸‹åŒ…æ‹¬ä¸¤ä¸ªä¸»è¦å­å…ƒç´ ï¼Œåˆ†åˆ«ä¸º<code class="language-plaintext highlighter-rouge">&lt;servlet-name&gt;</code>ä¸<code class="language-plaintext highlighter-rouge">&lt;servlet-class&gt;</code>ã€‚å…¶ä¸­<code class="language-plaintext highlighter-rouge">&lt;sevlet-name&gt;</code>å…ƒç´ ç”¨äºæŒ‡å®š Servlet çš„åç§°ï¼Œæ­¤
åç§°å¯ä»¥ä¸ºè‡ªå®šä¹‰çš„åç§°ï¼›<code class="language-plaintext highlighter-rouge">&lt;servlet-class&gt;</code>å…ƒç´ ç”¨äºæŒ‡å®š Servlet å¯¹è±¡çš„ç±»å®Œæ•´ä½ç½®ã€‚</p>

<p><code class="language-plaintext highlighter-rouge">&lt;servlet-mapping&gt;</code>æ ‡ç­¾ä¸‹ä¹ŸåŒ…å«ä¸¤ä¸ªä¸»è¦çš„å…ƒç´ ï¼Œåˆ†åˆ«ä¸º<code class="language-plaintext highlighter-rouge">&lt;servlet-name&gt;</code>å…ƒç´ ä¸<code class="language-plaintext highlighter-rouge">&lt;url-pattern&gt;</code>å…ƒç´ ã€‚å…¶ä¸­ï¼Œ<code class="language-plaintext highlighter-rouge">&lt;servlet-name&gt;</code>å…ƒç´ ç”¨äºæŒ‡å®š 
Servlet çš„åç§°ï¼Œå®ƒéœ€è¦ä¸<code class="language-plaintext highlighter-rouge">&lt;servlet&gt;</code>æ ‡ç­¾ä¸‹çš„<code class="language-plaintext highlighter-rouge">&lt;servlet-name&gt;</code>å…ƒç´ çš„åç§°ç›¸å¯¹åº”ï¼›<code class="language-plaintext highlighter-rouge">&lt;url-pattern&gt;</code>å…ƒç´ ç”¨äºå»ºç«‹ Servlet çš„æ˜ å°„åœ°å€ï¼Œä¹Ÿå°±æ˜¯
æŒ‡å®šè®¿é—®æ­¤ Servlet çš„ URLã€‚</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ä¸‹é¢æ˜¯å®Œæ•´ç¤ºä¾‹ä»£ç 
</code></pre></div></div>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="nn">com.lyq.servlet</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.PrintWriter</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.servlet.ServletException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.servlet.http.HttpServlet</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.servlet.http.HttpServletRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.servlet.http.HttpServletResponse</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">HelloServlet</span> <span class="kd">extends</span> <span class="nc">HttpServlet</span> <span class="o">{</span>
	<span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">long</span> <span class="n">serialVersionUID</span> <span class="o">=</span> <span class="mi">1L</span><span class="o">;</span>
	<span class="c1">// å¤„ç†POSTè¯·æ±‚</span>
	<span class="kd">protected</span> <span class="kt">void</span> <span class="nf">doPost</span><span class="o">(</span><span class="nc">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span>
			<span class="nc">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">ServletException</span><span class="o">,</span> <span class="nc">IOException</span> <span class="o">{</span>
		<span class="n">request</span><span class="o">.</span><span class="na">setCharacterEncoding</span><span class="o">(</span><span class="s">"UTF-8"</span><span class="o">);</span>
		<span class="n">response</span><span class="o">.</span><span class="na">setContentType</span><span class="o">(</span><span class="s">"text/html; charset=UTF-8"</span><span class="o">);</span>
		<span class="c1">// è·å–nameå‚æ•°å€¼</span>
		<span class="nc">String</span> <span class="n">name</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"name"</span><span class="o">);</span>
		<span class="c1">// ä»responseä¸­è·å–PrintWriterå¯¹è±¡</span>
		<span class="nc">PrintWriter</span> <span class="n">writer</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="na">getWriter</span><span class="o">();</span>
		<span class="c1">// åˆ¤æ–­nameæ˜¯å¦ä¸ºç©º</span>
		<span class="k">if</span> <span class="o">(</span><span class="n">name</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
			<span class="c1">// å¦‚æœnameä¸ä¸ºç©º,å°†é€šè¿‡writerè¾“å‡ºname</span>
			<span class="n">writer</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">"Hello "</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> <span class="s">" !"</span><span class="o">);</span>
		<span class="o">}</span>
		<span class="n">writer</span><span class="o">.</span><span class="na">flush</span><span class="o">();</span><span class="c1">// åˆ·æ–°writer</span>
		<span class="n">writer</span><span class="o">.</span><span class="na">close</span><span class="o">();</span><span class="c1">// å…³é—­writer</span>
	<span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>å°†ä¸Šé¢ä»£ç ä¿å­˜ä¸º HelloServlet.java æ–‡ä»¶ï¼Œæ¥ä¸‹æ¥ç¼–å†™ Servlet é…ç½®äº web.xml æ–‡ä»¶å¦‚ä¸‹ï¼š</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;web-app</span> <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
	<span class="na">xmlns=</span><span class="s">"http://java.sun.com/xml/ns/javaee"</span> <span class="na">xmlns:web=</span><span class="s">"http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"</span>
	<span class="na">xsi:schemaLocation=</span><span class="s">"http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"</span>
	<span class="na">id=</span><span class="s">"WebApp_ID"</span> <span class="na">version=</span><span class="s">"2.5"</span><span class="nt">&gt;</span>
	<span class="nt">&lt;display-name&gt;</span>5.1<span class="nt">&lt;/display-name&gt;</span>
	<span class="nt">&lt;welcome-file-list&gt;</span>
		<span class="nt">&lt;welcome-file&gt;</span>index.html<span class="nt">&lt;/welcome-file&gt;</span>
		<span class="nt">&lt;welcome-file&gt;</span>index.htm<span class="nt">&lt;/welcome-file&gt;</span>
		<span class="nt">&lt;welcome-file&gt;</span>index.jsp<span class="nt">&lt;/welcome-file&gt;</span>
		<span class="nt">&lt;welcome-file&gt;</span>default.html<span class="nt">&lt;/welcome-file&gt;</span>
		<span class="nt">&lt;welcome-file&gt;</span>default.htm<span class="nt">&lt;/welcome-file&gt;</span>
		<span class="nt">&lt;welcome-file&gt;</span>default.jsp<span class="nt">&lt;/welcome-file&gt;</span>
	<span class="nt">&lt;/welcome-file-list&gt;</span>
	<span class="c">&lt;!-- Servletå£°æ˜ --&gt;</span>
	<span class="nt">&lt;servlet&gt;</span>
		<span class="c">&lt;!-- Servletåç§° --&gt;</span>
		<span class="nt">&lt;servlet-name&gt;</span>HelloServlet<span class="nt">&lt;/servlet-name&gt;</span>
		<span class="c">&lt;!-- Servletç±»å --&gt;</span>
		<span class="nt">&lt;servlet-class&gt;</span>com.lyq.servlet.HelloServlet<span class="nt">&lt;/servlet-class&gt;</span>
	<span class="nt">&lt;/servlet&gt;</span>
	<span class="c">&lt;!-- Servletæ˜ å°„ --&gt;</span>
	<span class="nt">&lt;servlet-mapping&gt;</span>
		<span class="c">&lt;!-- Servletåç§° --&gt;</span>
		<span class="nt">&lt;servlet-name&gt;</span>HelloServlet<span class="nt">&lt;/servlet-name&gt;</span>
		<span class="c">&lt;!-- Servletæ˜ å°„URLåœ°å€ --&gt;</span>
		<span class="nt">&lt;url-pattern&gt;</span>/HelloServlet<span class="nt">&lt;/url-pattern&gt;</span>
	<span class="nt">&lt;/servlet-mapping&gt;</span>

<span class="nt">&lt;/web-app&gt;</span></code></pre></figure>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>æ¥ä¸‹æ¥ç¼–å†™ index.jsp æ–‡ä»¶å¦‚ä¸‹ï¼š
</code></pre></div></div>

<figure class="highlight"><pre><code class="language-jsp" data-lang="jsp"><span class="nt">&lt;%@ page </span><span class="na">language=</span><span class="s">"java"</span><span class="na"> contentType=</span><span class="s">"text/html; charset=UTF-8"</span><span class="na">
    pageEncoding=</span><span class="s">"UTF-8"</span><span class="nt">%&gt;</span>
<span class="cp">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">"Content-Type"</span> <span class="na">content=</span><span class="s">"text/html; charset=UTF-8"</span><span class="nt">&gt;</span>
<span class="nt">&lt;title&gt;</span>Servlet<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;style </span><span class="na">type=</span><span class="s">"text/css"</span><span class="nt">&gt;</span>
	<span class="nt">p</span><span class="p">{</span>
		<span class="nl">font-size</span><span class="p">:</span> <span class="m">14px</span><span class="p">;</span>
	<span class="p">}</span>
<span class="nt">&lt;/style&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
<span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">"HelloServlet"</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
	<span class="nt">&lt;p&gt;</span>è¯·è¾“å…¥æ‚¨çš„å§“åï¼š<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"name"</span><span class="nt">&gt;&lt;/p&gt;</span>
	<span class="nt">&lt;p&gt;&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">value=</span><span class="s">"æã€€äº¤"</span><span class="nt">/&gt;&lt;/p&gt;</span>
<span class="nt">&lt;/form&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span></code></pre></figure>

<p>è¯´æ˜ï¼šä¸Šè¿°æ–‡ä»¶æ”¾ç½®çš„ä½ç½®è§ JSP ç¯å¢ƒé…ç½®ï¼Œä¹‹ååœ¨åœ°å€æ è¾“å…¥ http://localhost:8080/myweb/index.jsp å³å¯,
å¦‚æœå‡ºç°å¼‚å¸¸è¯·é‡æ–°æ–°å»ºæ–‡ä»¶å¤¹ï¼ˆæ¯”å¦‚ myweb_1ï¼‰å†å°è¯•.</p>

<h2 id="servletè¿‡æ»¤å™¨">Servletè¿‡æ»¤å™¨</h2>

<p>Servlet è¿‡æ»¤å™¨ä¸ Servlet ååˆ†ç›¸ä¼¼ï¼Œä½†å®ƒå…·æœ‰æ‹¦æˆªå®¢æœç«¯ï¼ˆæµè§ˆå™¨ï¼‰è¯·æ±‚çš„åŠŸèƒ½ï¼ŒServlet è¿‡æ»¤å™¨å¯ä»¥æ”¹å˜è¯·æ±‚ä¸­çš„å†…å®¹ï¼Œ
æ¥æ»¡è¶³å®é™…å¼€å‘ä¸­çš„éœ€è¦ã€‚å¯¹äºç¨‹åºå¼€å‘äººå‘˜è€Œè¨€ï¼Œè¿‡æ»¤å™¨å®è´¨ä¸Šå°±æ˜¯åœ¨ Web åº”ç”¨æœåŠ¡å™¨ä¸Šçš„ä¸€ä¸ª Web åº”ç”¨ç»„ä»¶ï¼Œç”¨äºæ‹¦æˆªå®¢æœç«¯
ï¼ˆæµè§ˆå™¨ï¼‰ä¸ç›®æ ‡èµ„æºçš„è¯·æ±‚ï¼Œå¹¶å¯¹è¿™äº›è¯·æ±‚è¿›è¡Œä¸€å®šè¿‡æ»¤å¤„ç†å†å‘é€ä¸ªç›®æ ‡èµ„æºã€‚è¿‡æ»¤å™¨å¤„ç†æ–¹å¼è§ä¸‹å›¾ï¼š</p>

<p><img src="/assets/img/java_jsp/jsp-basic-17.png" alt="è¿‡æ»¤å™¨å¤„ç†æ–¹å¼" /></p>

<p>å¯è§åœ¨Webéƒ¨ç½²äº†è¿‡æ»¤å™¨ä»¥åï¼Œä¸ä»…å®¢æœç«¯å‘é€çš„è¯·æ±‚ä¼šç»è¿‡è¿‡æ»¤å™¨çš„å¤„ç†ï¼Œè€Œä¸”è¯·æ±‚åœ¨è¢«å‘é€åˆ°ç›®æ ‡èµ„æºå¤„ç†ä»¥åï¼Œè¯·æ±‚å›åº”ä¿¡æ¯ä¹ŸåŒæ ·è¦ç»è¿‡é¡¾è™‘å™¨ã€</p>

<p>å¦‚æœä¸€ä¸ªWebåº”ç”¨ä¸­ä½¿ç”¨ä¸€ä¸ªè¿‡æ»¤å™¨ä¸èƒ½è§£å†³å®é™…ä¸­çš„ä¸šåŠ¡éœ€è¦ï¼Œå¯ä»¥éƒ¨ç½²å¤šä¸ªè¿‡æ»¤å¯¹ä¸šåŠ¡è¯·æ±‚è¿›è¡Œå¤šæ¬¡å¤„ç†ï¼Œè¿™æ ·å°±ç»„æˆäº†ä¸€ä¸ªè¿‡æ»¤å™¨é“¾ã€‚Webå®¹å™¨åœ¨å¤„ç†è¿‡æ»¤å™¨é“¾æ—¶ï¼Œ
å°†æŒ‰è¿‡æ»¤å™¨çš„å…ˆåé¡ºåºå¯¹è¯·æ±‚è¿›è¡Œå¤„ç†ã€‚</p>

<p>è¿‡æ»¤å™¨å¯¹è±¡æ”¾ç½®åœ¨<code class="language-plaintext highlighter-rouge">javax.Servlet</code>åŒ…ä¸­ï¼Œå…¶åç§°ä¸ºFilterï¼Œå®ƒæ˜¯ä¸€ä¸ªæ¥å£ã€‚é™¤äº†è¿™ä¸ªæ¥å£å¤–ï¼Œä¸è¿‡æ»¤å™¨ç›¸å…³çš„å¯¹è±¡è¿˜æœ‰<code class="language-plaintext highlighter-rouge">FilterConfigå¯¹è±¡</code>ä¸<code class="language-plaintext highlighter-rouge">FilterChainå¯¹è±¡</code>ï¼Œè¿™ä¸¤ä¸ªå¯¹è±¡ä¹Ÿæ˜¯æ¥å£å¯¹è±¡ï¼Œ
ä½äº<code class="language-plaintext highlighter-rouge">javax.servletåŒ…</code>ä¸­ï¼Œåˆ†åˆ«ä¸ºè¿‡æ»¤å™¨çš„é…ç½®å¯¹è±¡ä¸è¿‡æ»¤å™¨çš„ä¼ é€’å·¥å…·ã€‚åœ¨å®é™…å¼€å‘ä¸­ï¼Œå®šä¹‰è¿‡æ»¤å™¨å¯¹è±¡åªéœ€è¦ç›´æ¥æˆ–é—´æ¥åœ°å®ç°Filteræ¥å£ã€‚åˆ›å»ºä¸€ä¸ªè¿‡æ»¤å™¨å¯¹è±¡éœ€è¦å®ç°<code class="language-plaintext highlighter-rouge">javax.servlet.Filteræ¥å£</code>ï¼ŒåŒæ—¶å®ç°è¯¥æ¥å£çš„æ–¹æ³•ã€‚
è¿‡æ»¤å™¨ä¸Servletååˆ†ç›¸ä¼¼ï¼Œåœ¨åˆ›å»ºä¹‹ååŒæ ·éœ€è¦å¯¹å…¶è¿›è¡Œé…ç½®ã€‚è¿‡æ»¤å™¨çš„é…ç½®ä¸»è¦åˆ†ä¸ºä¸¤ä¸ªæ­¥éª¤ï¼Œåˆ†åˆ«ä¸ºå£°æ˜è¿‡æ»¤å™¨å¯¹è±¡å’Œåˆ›å»ºè¿‡æ»¤å™¨æ˜ å°„ã€‚</p>

<h1 id="elä¸jstlæ ‡ç­¾åº“">ELä¸JSTLæ ‡ç­¾åº“</h1>

<p>ELä¸JSTLçš„å‡ºç°æ”¹å˜äº†Webå¼€å‘äººå‘˜çš„ç¼–ç¨‹æ–¹å¼ã€‚é€šè¿‡ELï¼Œå¯ä»¥ç®€åŒ–JSPå¼€å‘ä¸­å¯¹å¯¹è±¡çš„å¼•ç”¨ï¼Œä»è€Œè§„èŒƒé¡µé¢ä»£ç ï¼Œå¢åŠ ç¨‹åºçš„å¯è¯»æ€§åŠå¯ç»´æŠ¤æ€§ï¼›
è€ŒJSTLå¯ä»¥å–ä»£åœ¨ä¼ ç»ŸJSPç¨‹åºä¸­åµŒå…¥javaä»£ç ï¼Œä¸¤è€…å¯ä»¥è®©Webå¼€å‘äººå‘˜æ›´åŠ é«˜æ•ˆåœ°å¼€å‘ä»£ç ã€‚ELæ˜¯è¡¨è¾¾å¼è¯­è¨€ï¼Œè‹±æ–‡ä¸ºExpression Languageï¼Œ
ç®€ç§°ELï¼Œå®ƒæ˜¯JSP2.0ä¸­å¼•å…¥çš„ä¸€ä¸ªæ–°çš„å†…å®¹ã€‚JSTLæ˜¯JavaScript Pages Standard Tag Libraryï¼ˆJSPæ ‡å‡†æ ‡ç­¾åº“ï¼‰çš„ç®€ç§°ï¼Œå®ƒæ˜¯ç”±5ä¸ªåŠŸèƒ½ä¸åŒçš„æ ‡ç­¾åº“ç»„æˆã€‚
è¿™5ä¸ªæ ‡ç­¾åº“åˆ†åˆ«æ˜¯æ ¸å¿ƒæ ‡ç­¾åº“ã€æ ¼å¼æ ‡ç­¾åº“ã€SQLæ ‡ç­¾åº“ã€XMLæ ‡ç­¾åº“å’Œå‡½æ•°æ ‡ç­¾åº“ã€‚ELå’ŒJSTLçš„å…·ä½“è¯­æ³•å’Œä½¿ç”¨æ–¹æ³•è¯·æŸ¥è¯¢å…¶ä»–èµ„æ–™ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒJSTLä¸ELæ²¡æœ‰æœ¬è´¨ä¸Šçš„å…³ç³»ï¼Œ
ä½†æ˜¯ï¼ŒJSTLä¸ELé…åˆä½¿ç”¨å°†å‘æŒ¥å‡ºJSTLæ›´åŠ å¼ºå¤§çš„åŠŸèƒ½ï¼Œæ‰€ä»¥è¦æƒ³ä½¿ç”¨å¥½JSTLï¼Œå­¦å¥½ELæ˜¯å…³é”®ã€‚ä¸‹é¢æœ‰ä¸¤ä¸ªä¾‹å­ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ä¾‹1ï¼šåœ¨é¡µé¢ä¸Šæ ¹æ®æ˜ŸæœŸæ˜¾ç¤ºä¸åŒçš„æç¤ºä¿¡æ¯ã€‚
</code></pre></div></div>

<p>ã€æ³¨æ„ã€‘é¦–å…ˆä¸‹è½½jstl.jarå’Œstandard.jaræ”¾åœ¨mywebä¸‹çš„WEB-INFæ–‡ä»¶å¤¹ä¸­çš„libæ–‡ä»¶ä¸‹ã€‚</p>

<p>index.jspæ–‡ä»¶å¦‚ä¸‹ï¼š</p>

<figure class="highlight"><pre><code class="language-jsp" data-lang="jsp"><span class="nt">&lt;%@ page </span><span class="na">language=</span><span class="s">"java"</span><span class="na"> contentType=</span><span class="s">"text/html; charset=UTF-8"</span><span class="na"> import=</span><span class="s">"java.util.*"</span><span class="na">
    pageEncoding=</span><span class="s">"UTF-8"</span><span class="nt">%&gt;</span>
<span class="nt">&lt;%@ taglib </span><span class="na">uri=</span><span class="s">"http://java.sun.com/jsp/jstl/core"</span><span class="na"> prefix=</span><span class="s">"c"</span><span class="nt">%&gt;</span>
<span class="cp">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">"Content-Type"</span> <span class="na">content=</span><span class="s">"text/html; charset=GB18030"</span><span class="nt">&gt;</span>
<span class="nt">&lt;title&gt;</span>æ ¹æ®å½“å‰çš„æ˜ŸæœŸæ˜¾ç¤ºä¸åŒçš„æç¤ºä¿¡æ¯<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
<span class="c">&lt;!-- è·å–æ˜ŸæœŸå¹¶ä¿å­˜åˆ°å˜é‡ä¸­ --&gt;</span>
<span class="nt">&lt;c:set </span><span class="na">var=</span><span class="s">"week"</span><span class="nt">&gt;</span>
	<span class="nt">&lt;%=</span><span class="k">new</span> <span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">Date</span><span class="o">().</span><span class="na">getDay</span><span class="o">()</span><span class="nt">%&gt;</span>
<span class="nt">&lt;/c:set&gt;</span>
<span class="nt">&lt;c:choose&gt;</span>
	<span class="nt">&lt;c:when </span><span class="na">test=</span><span class="s">"</span><span class="si">${</span><span class="n">week</span><span class="o">==</span><span class="mi">0</span><span class="si">}</span><span class="s">"</span><span class="nt">&gt;</span>ä»Šå¤©æ˜¯æ˜ŸæœŸæ—¥ï¼š<span class="nt">&lt;br&gt;&lt;/c:when&gt;</span>
	<span class="nt">&lt;c:otherwise&gt;</span>ä»Šå¤©æ˜¯æ˜ŸæœŸ<span class="nt">&lt;c:out </span><span class="na">value=</span><span class="s">"</span><span class="si">${</span><span class="n">week</span><span class="si">}</span><span class="s">"</span><span class="nt">/&gt;</span>ï¼š<span class="nt">&lt;br&gt;&lt;/c:otherwise&gt;</span>
<span class="nt">&lt;/c:choose&gt;</span>
<span class="nt">&lt;c:choose&gt;</span>
	<span class="nt">&lt;c:when </span><span class="na">test=</span><span class="s">"</span><span class="si">${</span><span class="n">week</span><span class="o">==</span><span class="mi">0</span> <span class="o">||</span> <span class="n">week</span><span class="o">==</span><span class="mi">6</span><span class="si">}</span><span class="s">"</span><span class="nt">&gt;</span>ä»Šå¤©æ˜¯ä¼‘æ¯æ—¥ï¼Œæ”¾æ¾ä¸€ä¸‹å¿ƒæƒ…å§ï¼<span class="nt">&lt;/c:when&gt;</span>
	<span class="nt">&lt;c:when </span><span class="na">test=</span><span class="s">"</span><span class="si">${</span><span class="n">week</span><span class="o">==</span><span class="mi">1</span><span class="si">}</span><span class="s">"</span> <span class="nt">&gt;</span>æ–°çš„ä¸€å‘¨å¼€å§‹äº†ï¼ŒåŠªåŠ›å­¦ä¹ å§ï¼<span class="nt">&lt;/c:when&gt;</span>
	<span class="nt">&lt;c:otherwise&gt;</span>ç»§ç»­åŠªåŠ›å­¦ä¹ å§ï¼<span class="nt">&lt;/c:otherwise&gt;</span>
<span class="nt">&lt;/c:choose&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span></code></pre></figure>

<p>è¿˜éœ€è¦ä¿®æ”¹web.xmlæ–‡ä»¶å†…å®¹ï¼Œå…¶å†…å®¹å¦‚ä¸‹ï¼š</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;web-app</span> <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="na">xmlns=</span><span class="s">"http://java.sun.com/xml/ns/javaee"</span> <span class="na">xmlns:web=</span><span class="s">"http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"</span> <span class="na">xsi:schemaLocation=</span><span class="s">"http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"</span> <span class="na">id=</span><span class="s">"WebApp_ID"</span> <span class="na">version=</span><span class="s">"2.5"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;display-name&gt;</span>6.6<span class="nt">&lt;/display-name&gt;</span>
  <span class="nt">&lt;welcome-file-list&gt;</span>
    <span class="nt">&lt;welcome-file&gt;</span>index.html<span class="nt">&lt;/welcome-file&gt;</span>
    <span class="nt">&lt;welcome-file&gt;</span>index.htm<span class="nt">&lt;/welcome-file&gt;</span>
    <span class="nt">&lt;welcome-file&gt;</span>index.jsp<span class="nt">&lt;/welcome-file&gt;</span>
    <span class="nt">&lt;welcome-file&gt;</span>default.html<span class="nt">&lt;/welcome-file&gt;</span>
    <span class="nt">&lt;welcome-file&gt;</span>default.htm<span class="nt">&lt;/welcome-file&gt;</span>
    <span class="nt">&lt;welcome-file&gt;</span>default.jsp<span class="nt">&lt;/welcome-file&gt;</span>
  <span class="nt">&lt;/welcome-file-list&gt;</span>
 <span class="nt">&lt;dependency&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>jstl<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>jstl<span class="nt">&lt;/artifactId&gt;</span>
            <span class="nt">&lt;version&gt;</span>1.1.2<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;/dependency&gt;</span>
        
        <span class="nt">&lt;dependency&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>taglibs<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>standard<span class="nt">&lt;/artifactId&gt;</span>
            <span class="nt">&lt;version&gt;</span>1.1.2<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;/dependency&gt;</span>
<span class="nt">&lt;/web-app&gt;</span></code></pre></figure>

<p>å®Œæˆä»¥ä¸Šæ“ä½œä¹‹åï¼Œå¯åŠ¨tomcatï¼Œ<br />åœ¨æµè§ˆå™¨ä¸­è¾“å…¥http://localhost:8080/myweb/index.jspå³å¯</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ä¾‹2ï¼š è·å–æ•°ç»„ä¸­ä¿å­˜çš„çƒç±»ä¿¡æ¯
</code></pre></div></div>

<p>index.jspæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p>

<figure class="highlight"><pre><code class="language-jsp" data-lang="jsp"><span class="nt">&lt;%@ page </span><span class="na">language=</span><span class="s">"java"</span><span class="na"> contentType=</span><span class="s">"text/html; charset=UTF-8"</span><span class="na">
    pageEncoding=</span><span class="s">"UTF-8"</span><span class="nt">%&gt;</span>
<span class="nt">&lt;%@ taglib </span><span class="na">uri=</span><span class="s">"http://java.sun.com/jsp/jstl/core"</span><span class="na"> prefix=</span><span class="s">"c"</span><span class="nt">%&gt;</span>
<span class="nt">&lt;%</span>
	<span class="nc">String</span><span class="o">[]</span> <span class="n">arr</span><span class="o">={</span><span class="s">"è¶³çƒ"</span><span class="o">,</span><span class="s">"ç¯®çƒ"</span><span class="o">,</span><span class="s">"æ’çƒ"</span><span class="o">,</span><span class="s">"ä¹’ä¹“çƒ"</span><span class="o">};</span> 
	<span class="n">request</span><span class="o">.</span><span class="na">setAttribute</span><span class="o">(</span><span class="s">"arrBall"</span><span class="o">,</span><span class="n">arr</span><span class="o">);</span>
<span class="nt">%&gt;</span>
<span class="cp">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">"Content-Type"</span> <span class="na">content=</span><span class="s">"text/html; charset=UTF-8"</span><span class="nt">&gt;</span>
<span class="nt">&lt;title&gt;</span>æ˜¾ç¤ºæ•°ç»„ä¸­çš„æ•°æ®<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
<span class="nt">&lt;c:forEach </span><span class="na">items=</span><span class="s">"</span><span class="si">${</span><span class="n">requestScope</span><span class="o">.</span><span class="na">arrBall</span><span class="si">}</span><span class="s">"</span><span class="na"> var=</span><span class="s">"ball"</span><span class="na"> varStatus=</span><span class="s">"id"</span><span class="nt">&gt;</span>
	${id.index }<span class="ni">&amp;nbsp;</span>${ball}<span class="ni">&amp;nbsp;&amp;nbsp;</span>
<span class="nt">&lt;/c:forEach&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span></code></pre></figure>

<p>web.xmlæ–‡ä»¶å†…å®¹åŒå‰é¢çš„ä¾‹å­ã€‚</p>

<h1 id="åŠ¨æ€ç½‘ç«™ä¹‹çµé­‚-æ•°æ®åº“åº”ç”¨å¼€å‘">åŠ¨æ€ç½‘ç«™ä¹‹çµé­‚â€”-æ•°æ®åº“åº”ç”¨å¼€å‘</h1>

<p>JDBCæ˜¯Sunå…¬å¸æå‡ºçš„Java APIä¸­çš„ä¸€éƒ¨åˆ†ï¼Œå…¶å«ä¹‰æ˜¯ç”¨Javaè¯­è¨€æ¥è®¿é—®æ•°æ®åº“ï¼Œæ˜¯Javaç¨‹åºè®¿é—®æ•°æ®åº“çš„æ ‡å‡†æ¥å£ã€‚
å°½ç®¡æ‰€æœ‰æ•°æ®åº“éƒ½æ”¯æŒSQLä½œä¸ºæ•°æ®åº“è®¿é—®è¯­è¨€ï¼Œä½†ä¸åŒçš„æ•°æ®åº“å¼•æ“æ‰€æ‰§è¡ŒSQLè¯­å¥çš„APIæœ‰æ‰€å·®å¼‚ã€‚ä¸ºäº†å¸®åŠ©ç¨‹åºå‘˜ç¼–å†™å¯ä»¥
åœ¨ä¸åŒæ•°æ®åº“å¼•æ“ä¹‹é—´é€šç”¨çš„ä»£ç ï¼ŒJava APIä¸­æä¾›äº†è®¿é—®æ•°æ®çš„JDBC APIï¼Œä½¿ç”¨JDBCä¸­æä¾›çš„æ¥å£å’Œç±»å¯ä»¥åœ¨ä»»ä½•å…³ç³»æ•°æ®åº“ä¸­
ä»¥ç›¸åŒçš„æ–¹å¼æ‰§è¡ŒSQLè¯­å¥ã€‚</p>

<p>åœ¨ä½¿ç”¨JDBCè®¿é—®ä¸åŒçš„æ•°æ®åº“æ—¶ï¼Œéœ€è¦åŠ è½½æ•°æ®åº“çš„é©±åŠ¨ç¨‹åºï¼Œè¿™äº›é©±åŠ¨ç¨‹åºç”±æ•°æ®åº“å‚å•†æä¾›ã€‚ä¸å¿…å…³æ³¨æ•°æ®åº“é©±åŠ¨ç¨‹åºæ˜¯å¦‚ä½•
å®ç°çš„ï¼Œåœ¨ç¨‹åºä¸­åŠ è½½è¿™äº›é©±åŠ¨ç¨‹åºå³å¯ã€‚JDBCçš„ä½œç”¨å¦‚ä¸‹ç¤ºæ„å›¾ï¼š</p>

<p><img src="/assets/img/java_jsp/jsp-basic-18.png" alt="JDBCä½œç”¨ç¤ºæ„å›¾" /></p>

<p>JDBCè¿æ¥æ•°æ®åº“çš„è¿‡ç¨‹å¾ˆç®€å•ï¼Œä»¥è¿æ¥MySqlæ•°æ®åº“ä¸ºä¾‹ï¼Œå…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š</p>

<ul>
  <li>ï¼ˆ1ï¼‰åŠ è½½MySqlæ•°æ®åº“è¿æ¥çš„é©±åŠ¨ç¨‹åºã€‚å¯ä»¥åˆ°MySQLçš„å®˜æ–¹ç½‘ç«™ä¸Šä¸‹è½½è¯¥é©±åŠ¨çš„jaråŒ…ï¼Œ
ç„¶åæŠŠjaråŒ…å¤åˆ¶åˆ°å·¥ç¨‹çš„<code class="language-plaintext highlighter-rouge">WEB-INF/lib</code>ç›®å½•ä¸‹ã€‚åŠ è½½æ•°æ®åº“é©±åŠ¨ç¨‹åºä½¿ç”¨çš„æ˜¯<code class="language-plaintext highlighter-rouge">Class.forName()</code>æ–¹æ³•ï¼Œè°ƒç”¨æ­¤æ–¹æ³•ä¼š
å°†æŒ‡å®šçš„ç±»åŠ è½½åˆ°JVMä¸­ã€‚</li>
  <li>ï¼ˆ2ï¼‰è®¾ç½®è®¿é—®æ•°æ®åº“çš„ç”¨æˆ·åã€å¯†ç åŠè¿æ¥URLã€‚ä¸åŒæ•°æ®åº“å…¶è¿æ¥URLä¹Ÿæœ‰æ‰€ä¸åŒï¼Œä½†åŸºæœ¬æ ¼å¼éƒ½æ˜¯
â€œJDBCåè®®+æ•°æ®åº“çš„IPåœ°å€+æ•°æ®åº“ç«¯å£å·+æ•°æ®åº“åâ€ã€‚</li>
  <li>ï¼ˆ3ï¼‰é€šè¿‡JDBC APIçš„<code class="language-plaintext highlighter-rouge">DriverManagerç±»</code>çš„<code class="language-plaintext highlighter-rouge">getConnection()</code>æ–¹æ³•æ¥åˆ›å»ºä¸æ•°æ®åº“ä¹‹é—´çš„é“¾æ¥ã€
<code class="language-plaintext highlighter-rouge">getConnection()</code>æ–¹æ³•éœ€è¦æ¥æ”¶3ä¸ªSringç±»å‹çš„å‚æ•°â€”-è¿æ¥URLã€ç”¨æˆ·åå’Œå¯†ç ã€‚</li>
  <li>ï¼ˆ4ï¼‰å»ºç«‹è¿æ¥åï¼Œä½¿ç”¨è¯¥è¿æ¥å¯¹è±¡ç»„å»ºç”¨æˆ·æ“ä½œSQLè¯­å¥çš„<code class="language-plaintext highlighter-rouge">Statementå¯¹è±¡</code>ã€‚åˆ›å»ºStatementå¯¹è±¡
ç”¨çš„æ˜¯<code class="language-plaintext highlighter-rouge">createStatement()</code>æ–¹æ³•ã€‚ä¹Ÿå¯ä»¥ç”¨<code class="language-plaintext highlighter-rouge">Connection</code>å¯¹è±¡ç»„å»º<code class="language-plaintext highlighter-rouge">PreparedStatement</code>å¯¹è±¡æ¥æ‰§è¡ŒSQL
è¯­å¥ï¼Œä½¿ç”¨çš„æ˜¯<code class="language-plaintext highlighter-rouge">prepareStatement()</code>æ–¹æ³•ã€‚</li>
  <li>ï¼ˆ5ï¼‰è°ƒç”¨Statementå¯¹è±¡çš„<code class="language-plaintext highlighter-rouge">execute()</code>æ–¹æ³•ï¼Œç¼–è¯‘æ‰§è¡Œsqlè¯­å¥ã€‚</li>
  <li>ï¼ˆ6ï¼‰å…³é—­æ•°æ®åº“è¿æ¥ã€‚æ•°æ®åº“ç”¨å®Œåè¦åŠæ—¶å…³é—­æ•°æ®åº“ä¹‹é—´çš„è¿æ¥ï¼Œé‡Šæ”¾ç³»ç»Ÿèµ„æºã€‚</li>
</ul>

<p>JDBCæ ¸å¿ƒAOIä¸»è¦åŒ…æ‹¬5ä¸ªæ¥å£ï¼Œä»£è¡¨æ•°æ®åº“è¿æ¥çš„Connectionæ¥å£ã€é©±åŠ¨ç¨‹åºç®¡ç†ç±»DriverManagerã€
æ‰§è¡ŒSQLè¯­å¥çš„Statementæ¥å£ã€é¢„ç¼–è¯‘SQLè¯­å¥çš„PreparedStatementæ¥å£ã€ç»“æœé›†ResultSetæ¥å£ã€‚
ä¸‹é¢ç€é‡ä»‹ç»PreparedStatementæ¥å£å’ŒPreparedStatementæ¥å£ã€‚</p>

<p>Statementæ¥å£å°è£…äº†JDBCæ‰§è¡ŒSQLè¯­å¥çš„æ–¹æ³•ï¼Œå®ƒå¯ä»¥å®Œæˆjavaç¨‹åºæ‰§è¡ŒSQLè¯­å¥çš„æ“ä½œï¼Œä½†åœ¨å®é™…å¼€å‘è¿‡ç¨‹ä¸­ï¼Œ
æ—ºæ—ºéœ€è¦å°†ç¨‹åºä¸­çš„å˜é‡ä½œä¸ºSQLè¯­å¥çš„æŸ¥è¯¢æ¡ä»¶ç­‰å‚æ•°ã€‚ä½¿ç”¨Statementæ¥å£æ“ä½œè¿™äº›SQLè¯­å¥ä¼šè¿‡äºé¢‘ç¹ï¼Œè€Œä¸”
å­˜åœ¨å®‰å…¨æ–¹é¢çš„ç¼ºé™·ï¼Œé’ˆå¯¹è¿™ä¸€é—®é¢˜ï¼ŒJDBC APIä¸­æä¾›äº†æ‰©å±•çš„PreparedStatementæ¥å£ã€‚</p>

<p><code class="language-plaintext highlighter-rouge">PreparedStatementæ¥å£</code>ç»§æ‰¿äºStatementæ¥å£ï¼Œå®ƒæ‹¥æœ‰Statementæ¥å£ä¸­çš„æ–¹æ³•ã€‚PreparedStatementå¯¹è±¡æ‰€æ‰§è¡Œ
çš„SQLè¯­å¥æ˜¯é¢„ç¼–è¯‘çš„ï¼ŒSQLè¯­å¥è¢«é¢„ç¼–è¯‘å¹¶ä¿å­˜åœ¨PreparedStatementå¯¹è±¡ä¸­ï¼Œç„¶åå¯ä»¥ä½¿ç”¨æ­¤å¯¹è±¡é«˜æ•ˆåœ°å¤šæ¬¡æ‰§è¡Œ
SQLè¯­å¥ã€‚è€Œä¸”ï¼Œè¯¥æ¥å£é’ˆå¯¹å¸¦æœ‰å‚æ•°SQLè¯­å¥çš„æ‰§è¡Œæ“ä½œè¿›è¡Œäº†æ‰©å±•ï¼Œåº”ç”¨äºè¯¥æ¥å£ä¸­çš„SQLè¯­å¥ï¼Œå¯ä»¥ä½¿ç”¨å ä½ç¬¦â€?â€™
æ¥ä»£æ›¿SQLè¯­å¥çš„å‚æ•°ï¼Œç„¶åé€šè¿‡<code class="language-plaintext highlighter-rouge">setXxx()æ–¹æ³•</code>å¯¹SQLè¯­å¥çš„å‚æ•°è¿›è¡Œèµ‹å€¼ã€‚</p>

<p><code class="language-plaintext highlighter-rouge">ResultSetå¯¹è±¡</code>ç”¨äºä¿å­˜JDBCæ‰§è¡ŒæŸ¥è¯¢æ—¶è¿”å›çš„ç»“æœé›†ã€‚è¯¥ç»“æœé›†ä¸æ•°æ®åº“è¡¨å­—æ®µç›¸å¯¹åº”ï¼Œä¸æ•°æ®åº“çš„è¡¨ä¸€æ ·ä¹Ÿæ˜¯ç”±è¡Œå’Œåˆ—
ç»„æˆï¼Œå¹¶ä¸”åœ¨ResultSetç»“æœé›†çš„è¡Œä¸Šæä¾›æŒ‡é’ˆã€‚æœ€åˆï¼ŒæŒ‡é’ˆæŒ‡å‘ç»“æœé›†çš„ç¬¬ä¸€è¡Œä¹‹å‰ï¼Œè°ƒç”¨next()æ–¹æ³•å¯å°†æŒ‡é’ˆç§»åŠ¨åˆ°ä¸‹ä¸€è¡Œï¼Œ
å¦‚æœä¸‹ä¸€è¡Œæ²¡æœ‰æ•°æ®åˆ™è¿”å›å¸ƒå°”å€¼falseã€‚åœ¨åº”ç”¨ç¨‹åºä¸­ï¼Œç»å¸¸ä½¿ç”¨<code class="language-plaintext highlighter-rouge">next()</code>æ–¹æ³•ä½œä¸ºwhileå¾ªç¯çš„æ¡ä»¶æ¥è¿­ä»£ResultSetç»“æœé›†ã€‚
ResultSetçš„åŸç†ç»“æ„å¦‚ä¸‹å›¾ï¼š</p>

<p><img src="/assets/img/java_jsp/jsp-basic-19.png" alt="ResultSetçš„åŸç†ç»“æ„å›¾" /></p>

<h1 id="struts-2">Struts 2</h1>

<p>MVCï¼ˆModel-View-Controllerï¼Œæ¨¡å‹-è§†å›¾-æ§åˆ¶å™¨ï¼‰æ˜¯ä¸€ç§ç¨‹åºè®¾è®¡ç†å¿µã€‚ç›®å‰ï¼Œåœ¨Java Webåº”ç”¨æ–¹é¢
MVCæ¡†æ¶æœ‰å¾ˆå¤šï¼Œå¸¸ç”¨çš„æµå‘æ¡†æ¶æœ‰<code class="language-plaintext highlighter-rouge">Strutsã€JSFã€Tapestryã€Spring MVC</code>ç­‰ã€‚Struts 2æ˜¯WebWorkæŠ€æœ¯ä¸
StrutsæŠ€æœ¯çš„ç»“åˆï¼Œå…¶ä¸­WebWorkä¸­ï¼ŒActionå¯¹è±¡ä¸å†ä¸Servlet APIè€¦åˆï¼Œå®ƒå¯ä»¥åœ¨è„±ç¦»Webå®¹å™¨çš„æƒ…å†µä¸‹
è¿è¡Œï¼Œè€Œä¸”WebWorkè¿˜æä¾›äº†è‡ªå·±çš„IOCå®¹å™¨ï¼Œå¢å¼ºäº†ç¨‹åºçš„çµæ´»æ€§ï¼Œé€šè¿‡æ§åˆ¶åè½¬ä½¿ç”¨ç¨‹åºæµ‹è¯•æ›´åŠ ç®€å•ã€‚</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Strutsçš„å·¥ä½œå¦‚ç†å¦‚ä¸‹å›¾ï¼š
</code></pre></div></div>

<p><img src="/assets/img/java_jsp/jsp-basic-20.png" alt="Strutså·¥ä½œåŸç†" /></p>

<ul>
  <li>1ã€å®¢æˆ·ç«¯åˆå§‹åŒ–ä¸€ä¸ªæŒ‡å‘Servletå®¹å™¨ï¼ˆä¾‹å¦‚Tomcatï¼‰çš„è¯·æ±‚</li>
  <li>2ã€è¿™ä¸ªè¯·æ±‚ç»è¿‡ä¸€ç³»åˆ—çš„è¿‡æ»¤å™¨ï¼ˆFilterï¼‰ï¼ˆè¿™äº›è¿‡æ»¤å™¨ä¸­æœ‰ä¸€ä¸ªå«åš<code class="language-plaintext highlighter-rouge">ActionContextCleanUp</code>çš„å¯é€‰è¿‡æ»¤å™¨ï¼Œè¿™ä¸ªè¿‡æ»¤å™¨å¯¹äºStruts2å’Œå…¶ä»–æ¡†æ¶çš„é›†æˆå¾ˆæœ‰å¸®åŠ©ï¼Œä¾‹å¦‚ï¼šSiteMesh Pluginï¼‰</li>
  <li>3ã€æ¥ç€<code class="language-plaintext highlighter-rouge">FilterDispatcher</code>è¢«è°ƒç”¨ï¼ŒFilterDispatcherè¯¢é—®<code class="language-plaintext highlighter-rouge">ActionMapper</code>æ¥å†³å®šè¿™ä¸ªè¯·æ˜¯å¦éœ€è¦è°ƒç”¨æŸä¸ª<code class="language-plaintext highlighter-rouge">Action FilterDispatcher</code>æ˜¯æ§åˆ¶å™¨çš„æ ¸å¿ƒï¼Œå°±æ˜¯mvcä¸­cæ§åˆ¶å±‚çš„æ ¸å¿ƒã€‚</li>
  <li>4ã€å¦‚æœActionMapperå†³å®šéœ€è¦è°ƒç”¨æŸä¸ª<code class="language-plaintext highlighter-rouge">Action</code>ï¼ŒFilterDispatcheræŠŠè¯·æ±‚çš„å¤„ç†äº¤ç»™<code class="language-plaintext highlighter-rouge">ActionProxy</code></li>
  <li>5ã€ActionProxyé€šè¿‡<code class="language-plaintext highlighter-rouge">ConfigurationManager</code>è¯¢é—®æ¡†æ¶çš„é…ç½®æ–‡ä»¶ï¼Œæ‰¾åˆ°éœ€è¦è°ƒç”¨çš„<code class="language-plaintext highlighter-rouge">Actionç±»</code> ,è¿™é‡Œï¼Œæˆ‘ä»¬ä¸€èˆ¬æ˜¯ä»<code class="language-plaintext highlighter-rouge">struts.xml</code>é…ç½®ä¸­è¯»å–ã€‚</li>
  <li>6ã€ActionProxyåˆ›å»ºä¸€ä¸ª<code class="language-plaintext highlighter-rouge">ActionInvocation</code>çš„å®ä¾‹ã€‚</li>
  <li>7ã€ActionInvocationå®ä¾‹ä½¿ç”¨å‘½åæ¨¡å¼æ¥è°ƒç”¨ï¼Œåœ¨è°ƒç”¨Actionçš„è¿‡ç¨‹å‰åï¼Œæ¶‰åŠåˆ°ç›¸å…³æ‹¦æˆªå™¨ï¼ˆ<code class="language-plaintext highlighter-rouge">Intercepter</code>ï¼‰çš„è°ƒç”¨ã€‚</li>
  <li>8ã€ä¸€æ—¦Actionæ‰§è¡Œå®Œæ¯•ï¼ŒActionInvocationè´Ÿè´£æ ¹æ®struts.xmlä¸­çš„é…ç½®æ‰¾åˆ°å¯¹åº”çš„è¿”å›ç»“æœã€‚è¿”å›ç»“æœé€šå¸¸æ˜¯ï¼ˆä½†ä¸æ€»æ˜¯ï¼Œä¹Ÿå¯èƒ½æ˜¯å¦å¤–çš„ä¸€ä¸ªActioné“¾ï¼‰ä¸€ä¸ªéœ€è¦è¢«è¡¨ç¤ºçš„JSPæˆ–è€…FreeMarkerçš„æ¨¡ç‰ˆã€‚åœ¨è¡¨ç¤ºçš„è¿‡ç¨‹ä¸­å¯ä»¥ä½¿ç”¨Struts2 æ¡†æ¶ä¸­ç»§æ‰¿çš„æ ‡ç­¾ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­éœ€è¦æ¶‰åŠåˆ°ActionMapper</li>
</ul>

<p>åœ¨ä¸Šè¿°è¿‡ç¨‹ä¸­æ‰€æœ‰çš„å¯¹è±¡ï¼ˆ<code class="language-plaintext highlighter-rouge">Actionï¼ŒResultsï¼ŒInterceptors</code>ï¼Œç­‰ï¼‰éƒ½æ˜¯é€šè¿‡ObjectFactoryæ¥åˆ›å»ºçš„ã€‚</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹ ActionInvocation æ˜¯å¦‚ä½•å·¥ä½œçš„:
</code></pre></div></div>

<p>ActionInvocation æ˜¯ Xworks ä¸­ Action è°ƒåº¦çš„æ ¸å¿ƒã€‚è€Œå¯¹ Interceptor çš„è°ƒåº¦ï¼Œä¹Ÿæ­£æ˜¯ç”± ActionInvocation è´Ÿè´£ã€‚ActionInvocation æ˜¯ä¸€ä¸ªæ¥å£ï¼Œè€Œ DefaultActionInvocation åˆ™æ˜¯ Webwork å¯¹ ActionInvocation çš„é»˜è®¤å®ç°ã€‚Interceptor çš„è°ƒåº¦æµç¨‹å¤§è‡´å¦‚ä¸‹ï¼š</p>

<ul>
  <li>1ã€ActionInvocation åˆå§‹åŒ–æ—¶ï¼Œæ ¹æ®é…ç½®ï¼ŒåŠ è½½ Action ç›¸å…³çš„æ‰€æœ‰ Interceptorã€‚</li>
  <li>2ã€é€šè¿‡ <code class="language-plaintext highlighter-rouge">ActionInvocation.invoke</code> æ–¹æ³•è°ƒç”¨Actionå®ç°æ—¶ï¼Œæ‰§è¡Œ Interceptorã€‚Interceptor å°†å¾ˆå¤šåŠŸèƒ½ä»æˆ‘ä»¬çš„ Action ä¸­ç‹¬ç«‹å‡ºæ¥ï¼Œå¤§é‡å‡å°‘äº†æˆ‘ä»¬ Action çš„ä»£ç ï¼Œç‹¬ç«‹å‡ºæ¥çš„è¡Œä¸ºå…·æœ‰å¾ˆå¥½çš„é‡ç”¨æ€§ã€‚XWorkã€WebWork çš„è®¸å¤šåŠŸèƒ½éƒ½æ˜¯æœ‰ Interceptor å®ç°ï¼Œå¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­ç»„è£… Action ç”¨åˆ°çš„ Interceptorï¼Œå®ƒä¼šæŒ‰ç…§ä½ æŒ‡å®šçš„é¡ºåºï¼Œåœ¨ Action æ‰§è¡Œå‰åè¿è¡Œã€‚</li>
</ul>

<p>ä¸‹é¢å°†ç»™å‡ºä¸€ä¸ªä¾‹å­æ¥è¯´æ˜ Struts 2 çš„åº”ç”¨</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ä¾‹å­ï¼šåˆ›å»ºJava Web é¡¹ç›®ï¼Œæ·»åŠ  Struts 2 çš„æ”¯æŒç±»åº“ï¼Œé€šè¿‡ Struts 2 å°†è¯·æ±‚è½¬å‘åˆ°æŒ‡å®š JSP é¡µé¢ã€‚
</code></pre></div></div>

<ul>
  <li>ï¼ˆ1ï¼‰åˆ›å»ºåä¸ºmywebçš„webé¡¹ç›®ï¼Œå°†Struts 2çš„æ”¯æŒç±»åº“æ–‡ä»¶(ä»Struts2å®˜ç½‘ä¸‹è½½struts-2.x-all.zipè§£å‹åè¿›å…¥é‡Œé¢çš„appsæ–‡ä»¶å¤¹ï¼Œç”¨WinRARè§£å‹struts2-blank.waråæŠŠå…¶ä¸­çš„libæ–‡ä»¶å¤¹ä¸­æ‰€æœ‰jaråŒ…æ”¾å…¥é¡¹ç›®å¯¹åº”çš„ä½ç½®ï¼Œæ³¨æ„ä¸ºäº†åˆ¤æ–­ç¯å¢ƒæ˜¯å¦æ­å»ºå¥½ï¼Œå¯ä»¥ç”¨tomcatè¿è¡Œå…¶ä¸­çš„index.html)æ·»åŠ åˆ°WEB-INFç›®å½•ä¸­çš„libæ–‡ä»¶å¤¹ä¸­ã€‚ç”±äºæœ¬ç¤ºä¾‹å®ç°åŠŸèƒ½æ¯”è¾ƒç®€å•ï¼Œ
æ‰€ä»¥åªæ·»åŠ Struts 2çš„æ ¸å¿ƒç±»åŒ…å°±å¯ä»¥äº†ï¼Œè¿™äº›åŒ…å¦‚ä¸‹å›¾ï¼š
<img src="/assets/img/java_jsp/jsp-basic-21.png" alt="ä¾‹å­çš„jaråŒ…" /></li>
  <li>ï¼ˆ2ï¼‰åœ¨web.xmlæ–‡ä»¶ä¸­å£°æ˜Struts 2æä¾›çš„è¿‡æ»¤å™¨</li>
</ul>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;web-app</span> <span class="na">id=</span><span class="s">"WebApp_9"</span> <span class="na">version=</span><span class="s">"2.4"</span> <span class="na">xmlns=</span><span class="s">"http://java.sun.com/xml/ns/j2ee"</span> <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="na">xsi:schemaLocation=</span><span class="s">"http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;display-name&gt;</span>Struts Blank<span class="nt">&lt;/display-name&gt;</span>

    <span class="nt">&lt;filter&gt;</span>
        <span class="nt">&lt;filter-name&gt;</span>struts2<span class="nt">&lt;/filter-name&gt;</span>
        <span class="nt">&lt;filter-class&gt;</span>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter<span class="nt">&lt;/filter-class&gt;</span>
    <span class="nt">&lt;/filter&gt;</span>

    <span class="nt">&lt;filter-mapping&gt;</span>
        <span class="nt">&lt;filter-name&gt;</span>struts2<span class="nt">&lt;/filter-name&gt;</span>
        <span class="nt">&lt;url-pattern&gt;</span>/*<span class="nt">&lt;/url-pattern&gt;</span>
    <span class="nt">&lt;/filter-mapping&gt;</span>

    <span class="nt">&lt;welcome-file-list&gt;</span>
        <span class="nt">&lt;welcome-file&gt;</span>index.html<span class="nt">&lt;/welcome-file&gt;</span>
    <span class="nt">&lt;/welcome-file-list&gt;</span>

<span class="nt">&lt;/web-app&gt;</span></code></pre></figure>

<ul>
  <li>ï¼ˆ3ï¼‰åœ¨Webé¡¹ç›®çš„æºç æ–‡ä»¶å¤¹ä¸­ï¼Œåˆ›å»ºåä¸ºstruts.xmlçš„é…ç½®æ–‡ä»¶ã€‚åœ¨æ­¤é…ç½®æ–‡ä»¶ä¸­å®šä¹‰Struts2ä¸­çš„Actionå¯¹è±¡ï¼Œ
å…¶ä»£ç å¦‚ä¸‹ï¼š</li>
</ul>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span>
<span class="cp">&lt;!DOCTYPE struts PUBLIC
	"-//Apache Software Foundation//DTD Struts Configuration 2.3//EN"
	"http://struts.apache.org/dtds/struts-2.3.dtd"&gt;</span>

<span class="nt">&lt;struts&gt;</span>

    <span class="nt">&lt;constant</span> <span class="na">name=</span><span class="s">"struts.enable.DynamicMethodInvocation"</span> <span class="na">value=</span><span class="s">"false"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;constant</span> <span class="na">name=</span><span class="s">"struts.devMode"</span> <span class="na">value=</span><span class="s">"true"</span> <span class="nt">/&gt;</span>

    <span class="nt">&lt;package</span> <span class="na">name=</span><span class="s">"default"</span> <span class="na">namespace=</span><span class="s">"/"</span> <span class="na">extends=</span><span class="s">"struts-default"</span><span class="nt">&gt;</span>

        <span class="nt">&lt;action</span> <span class="na">name=</span><span class="s">"first"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;result&gt;</span>/first.jsp<span class="nt">&lt;/result&gt;</span>
        <span class="nt">&lt;/action&gt;</span>

        <span class="c">&lt;!-- Add actions here --&gt;</span>
    <span class="nt">&lt;/package&gt;</span>
    <span class="c">&lt;!-- Add packages here --&gt;</span>

<span class="nt">&lt;/struts&gt;</span></code></pre></figure>

<ul>
  <li>ï¼ˆ4ï¼‰åˆ›å»ºç¨‹åºä¸­çš„ä¸»é¡µé¢index.jspã€‚åœ¨æ­¤é¡µé¢ä¸­ç¼–å†™ä¸€ä¸ªè¶…é“¾æ¥ï¼Œç”¨äºè®¿é—®ä¸Šé¢å®šä¹‰çš„Actionå¯¹è±¡ï¼Œæ­¤é“¾æ¥çš„æ‰€æŒ‡å‘çš„åœ°å€ä¸ºâ€first.actionâ€,å…¶ä»£ç å¦‚ä¸‹ï¼š</li>
</ul>

<figure class="highlight"><pre><code class="language-jsp" data-lang="jsp"><span class="nt">&lt;%@ page </span><span class="na">language=</span><span class="s">"java"</span><span class="na"> contentType=</span><span class="s">"text/html; charset=UTF-8"</span><span class="na">
    pageEncoding=</span><span class="s">"UTF-8"</span><span class="nt">%&gt;</span>
<span class="cp">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">"Content-Type"</span> <span class="na">content=</span><span class="s">"text/html; charset=UTF-8"</span><span class="nt">&gt;</span>
<span class="nt">&lt;title&gt;</span>ä¸»é¡µ<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
	<span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"first.action"</span><span class="nt">&gt;</span>è¯·æ±‚Struts2<span class="nt">&lt;/a&gt;</span>
<span class="nt">&lt;/body&gt;</span>

<span class="nt">&lt;/html&gt;</span></code></pre></figure>

<ul>
  <li>ï¼ˆ5ï¼‰åˆ›å»ºåä¸ºfirst.jspçš„JSPé¡µé¢ï¼Œæ­¤é¡µé¢æ˜¯Actionå¯¹è±¡â€firstâ€å¤„ç†æˆåŠŸåçš„è¿”å›é¡µé¢ã€‚ä»£ç å¦‚ä¸‹ï¼š</li>
</ul>

<figure class="highlight"><pre><code class="language-jsp" data-lang="jsp"><span class="nt">&lt;%@ page </span><span class="na">language=</span><span class="s">"java"</span><span class="na"> contentType=</span><span class="s">"text/html; charset=UTF-8"</span><span class="na">
    pageEncoding=</span><span class="s">"UTF-8"</span><span class="nt">%&gt;</span>
<span class="cp">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">"Content-Type"</span> <span class="na">content=</span><span class="s">"text/html; charset=UTF-8"</span><span class="nt">&gt;</span>
<span class="nt">&lt;title&gt;</span>ç¬¬ä¸€ä¸ªStruts2ç¨‹åº<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
	ç¬¬ä¸€ä¸ªStruts2ç¨‹åº!
	<span class="nt">&lt;br&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span></code></pre></figure>

<p>tomcatå¯åŠ¨åè¿›å…¥åˆ°ç¨‹åºä¸»é¡µindex.jspé¡µé¢å³å¯ã€‚</p>

<h2 id="è®¤è¯†actionå¯¹è±¡">è®¤è¯†Actionå¯¹è±¡</h2>

<p>Actionå¯¹è±¡æ˜¯Struts2æ¡†æ¶ä¸­çš„é‡è¦å¯¹è±¡ï¼Œå®ƒä¸»è¦ç”¨äºå¯¹HTTPè¯·æ±‚è¿›è¡Œå¤„ç†ã€‚åœ¨Struts2 APIä¸­ï¼ŒActionå¯¹è±¡æ˜¯ä¸€ä¸ªå€Ÿå£ï¼Œ
å®ƒä½äº<code class="language-plaintext highlighter-rouge">com.opensymphony.xwork2</code>ï¼ˆåœ¨åä¸ºxworkçš„jaråŒ…ä¸­ï¼‰ã€‚Struts 2é¡¹ç›®å¼€å‘ä¸­ï¼Œåˆ›å»ºActionå¯¹è±¡éƒ½è¦ç›´æ¥æˆ–é—´æ¥
å®ç°æ­¤å¯¹è±¡ã€‚åœ¨Actionå€Ÿå£ä¸­ï¼ŒåŒ…å«äº†5ä¸ªé™æ€çš„æˆå‘˜å˜é‡ï¼Œåˆ†åˆ«æ˜¯<code class="language-plaintext highlighter-rouge">SUCCESSã€NONEã€ERRORã€INPUTã€LOGIN</code>ã€‚å®ƒä»¬æ˜¯Struts 2 API
ä¸ºå¤„ç†ç»“æœå®šä¹‰çš„é™æ€å˜é‡ï¼Œåæ˜ Actionçš„æ‰§è¡ŒçŠ¶æ€ã€‚</p>

<h3 id="è¯·æ±‚å‚æ•°çš„æ³¨å…¥åŸç†">è¯·æ±‚å‚æ•°çš„æ³¨å…¥åŸç†</h3>

<p>åœ¨Struts 2æ¡†æ¶ä¸­ï¼Œè¡¨å•æäº¤çš„æ•°æ®ä¼šè‡ªåŠ¨æ³¨å…¥åˆ°ä¸Actionå¯¹è±¡ä¸­ç›¸å¯¹åº”çš„å±æ€§ï¼Œå®ƒä¸<code class="language-plaintext highlighter-rouge">Spring</code>æ¡†æ¶ä¸­<code class="language-plaintext highlighter-rouge">IDC</code>æ³¨å…¥åŸç†ç›¸åŒï¼Œé€šè¿‡Actionå¯¹è±¡
ä¸ºå±æ€§æä¾›setteræ–¹æ³•è¿›è¡Œæ³¨å…¥ã€‚è¯·çœ‹ä¸‹é¢ä¾‹å­ï¼š</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserAction</span> <span class="kd">extends</span> <span class="nc">ActionSupport</span><span class="o">{</span>

    <span class="kd">private</span> <span class="nc">String</span> <span class="n">username</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setUsername</span><span class="o">(</span><span class="nc">String</span> <span class="n">username</span><span class="o">){</span>
        <span class="k">this</span><span class="o">.</span><span class="na">username</span> <span class="o">=</span> <span class="n">username</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getUsername</span><span class="o">(){</span>
        <span class="k">return</span> <span class="n">username</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">execute</span><span class="o">(){</span>
        <span class="k">return</span> <span class="no">SUCCESS</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>éœ€è¦æ³¨å…¥å±æ€§å€¼çš„Actionå¯¹è±¡ï¼Œå¿…é¡»å¯¹å±æ€§æä¾›<code class="language-plaintext highlighter-rouge">setXXX()</code>æ–¹æ³•ï¼Œå› ä¸ºStruts2çš„å†…éƒ¨å®ç°è¿”å›Java Beanè§„èŒƒä¸­æä¾›çš„
setteræ–¹æ³•ï¼Œè‡ªåŠ¨å¯¹å±æ€§æ³¨å…¥å€¼ã€‚</p>

<p><img src="/assets/img/java_jsp/jsp-basic-22.png" alt="æŠ€å·§" /></p>

<h3 id="actionçš„åŸºæœ¬æµç¨‹">Actionçš„åŸºæœ¬æµç¨‹</h3>

<p>Struts 2 æ¡†æ¶çš„å·¥ä½œï¼Œä¸»è¦æ˜¯é€šè¿‡ Struts 2 çš„è¿‡æ»¤å™¨å¯¹è±¡æ‹¦æˆª HTTP è¯·æ±‚ï¼Œç„¶åå°†è¯·æ±‚åˆ†é…åˆ°æŒ‡å®šçš„ Action è¿›è¡Œå¤„ç†ï¼Œ
å®ƒçš„åŸºæœ¬æµç¨‹å›¾å¦‚ä¸‹ï¼š</p>

<p><img src="/assets/img/java_jsp/jsp-basic-23.png" alt="ActionåŸºæœ¬æµç¨‹" /></p>

<p><img src="/assets/img/java_jsp/jsp-basic-24.png" alt="æŸ¥æ‰¾è¿”å›è§†å›¾" /></p>

<h2 id="ä»€ä¹ˆæ˜¯åŠ¨æ€action">ä»€ä¹ˆæ˜¯åŠ¨æ€Action</h2>

<p>å‰é¢æ‰€è®²è§£çš„ Action å¯¹è±¡ï¼Œéƒ½æ˜¯é€šè¿‡é‡å†™ execute() æ–¹æ³•å®ç°å¯¹æµè§ˆå™¨è¯·æ±‚çš„å¤„ç†ã€‚æ­¤ç§æ–¹å¼åªé€‚åˆäºæ¯”è¾ƒå•ä¸€çš„ä¸šåŠ¡é€»è¾‘è¯·æ±‚ã€‚ä½†åœ¨å®é™…çš„é¡¹ç›®å¼€å‘ä¸­ï¼Œä¸šåŠ¡è¯·æ±‚çš„ç±»å‹æ˜¯å¤šç§å¤šæ ·çš„ï¼Œ
å¦‚æœé€šè¿‡åˆ›å»ºå¤šä¸ª Action å¯¹è±¡ï¼Œç¼–å†™å¤šä¸ª excuse() æ–¹æ³•æ¥åº”å¯¹è¿™äº›è¯·æ±‚ï¼Œä¸ä»…å¤„ç†çš„æ–¹å¼è¿‡äºå¤æ‚ï¼Œè€Œä¸”éœ€è¦ç¼–å†™å¾ˆå¤šä»£ç ã€‚å½“ç„¶ï¼Œåº”å¯¹è¿™äº›è¯·æ±‚çš„æ–¹å¼æœ‰å¾ˆå¤šï¼Œä¾‹å¦‚ï¼Œå°†è¿™æ‰¹å¤„ç†é€»è¾‘
ç¼–å†™åœ¨ä¸€ä¸ª Action å¯¹è±¡ä¹‹ä¸­ï¼Œç„¶åé€šè¿‡ <code class="language-plaintext highlighter-rouge">execute()</code> æ–¹æ³•æ¥åˆ¤æ–­è¯·æ±‚çš„æ˜¯å“ªç§ä¸šåŠ¡é€»è¾‘ï¼Œåœ¨åˆ¤æ–­åå°†è¯·æ±‚è½¬å‘åˆ°å¯¹åº”çš„ä¸šåŠ¡é€»è¾‘å¤„ç†æ–¹æ³•ä¸Šï¼Œä¹Ÿæ˜¯ä¸€ç§å¾ˆå¥½çš„è§£å†³æ–¹æ¡ˆã€‚</p>

<p>Struts 2 æ¡†æ¶ä¸­æä¾›äº† â€œDynamic Actionâ€ è¿™æ ·ä¸€ä¸ªæ¦‚å¿µï¼Œè¢«ç§°ä¸º â€œåŠ¨æ€ Actionâ€ ã€‚é€šè¿‡åŠ¨æ€è¯·æ±‚ Action å¯¹è±¡ä¸­çš„æ–¹æ³•ï¼Œå¯ä»¥å®ç°æŸä¸€ä¸šåŠ¡é€»è¾‘çš„å¤„ç†ã€‚åº”ç”¨åŠ¨æ€ Action å’Œå¤„ç†æ–¹å¼å¦‚ä¸‹å›¾ï¼š</p>

<p><img src="/assets/img/java_jsp/jsp-basic-25.png" alt="åŠ¨æ€Actionå¤„ç†æ–¹å¼" /></p>

<p>ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼ŒåŠ¨æ€ Action çš„å¤„ç†æ–¹å¼æ˜¯é€šè¿‡è¯·æ±‚ Action å¯¹è±¡ä¸­ä¸€ä¸ªå…·ä½“çš„æ–¹æ³•æ¥å®ç°åŠ¨æ€çš„æ“ä½œã€‚å…¶å…·ä½“çš„æ“ä½œæ–¹å¼ï¼Œæ˜¯åœ¨è¯·æ±‚
 Action çš„ URL åœ°å€åæ–¹åŠ ä¸Šè¯·æ±‚å­—ç¬¦ä¸²ï¼ˆæ–¹æ³•åç§°ï¼‰ï¼Œä¸ Action å¯¹è±¡ä¸­çš„æ–¹æ³•è¿›è¡ŒåŒ¹é…ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ Action åœ°å€ä¸è¯·æ±‚å­—ç¬¦ä¸²
ä¹‹é—´ä»¥ <code class="language-plaintext highlighter-rouge">"!"</code> å·è¿›è¡Œåˆ†éš”ã€‚ä¾‹å¦‚ï¼Œåœ¨é…ç½®æ–‡ä»¶ struts.xml æ–‡ä»¶ä¸­é…ç½®äº† <code class="language-plaintext highlighter-rouge">userAction</code>ï¼Œå½“è¯·æ±‚å…¶ä¸­çš„ <code class="language-plaintext highlighter-rouge">add()</code> æ–¹æ³•æ—¶ï¼Œ
å…¶è¯·æ±‚æ–¹å¼å¦‚ä¸‹ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/userAction!add
</code></pre></div></div>

<h3 id="åŠ¨æ€-action-çš„åº”ç”¨">åŠ¨æ€ Action çš„åº”ç”¨</h3>

<p>å„æ–‡ä»¶çš„ä½ç½®å’Œæ‰€éœ€è¦çš„ç¯å¢ƒç­‰è¯·å‚è€ƒå‰é¢çš„ Struts ä¾‹å­ï¼Œä¸‹é¢ç»™å‡ºå„æ–‡ä»¶çš„ä»£ç ã€‚</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>UserAction.java æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š
</code></pre></div></div>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="nn">com.lyq.action</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">com.opensymphony.xwork2.ActionSupport</span><span class="o">;</span>
<span class="cm">/**
 * ç”¨æˆ·Action
 * @author Li Yongqiang
 */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserAction</span> <span class="kd">extends</span> <span class="nc">ActionSupport</span> <span class="o">{</span>
	<span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">long</span> <span class="n">serialVersionUID</span> <span class="o">=</span> <span class="mi">1L</span><span class="o">;</span>
	<span class="c1">// æç¤ºä¿¡æ¯</span>
	<span class="kd">private</span> <span class="nc">String</span> <span class="n">info</span><span class="o">;</span>
	<span class="c1">// æ·»åŠ ç”¨æˆ·ä¿¡æ¯</span>
	<span class="kd">public</span> <span class="nc">String</span> <span class="nf">add</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Exception</span><span class="o">{</span>
		<span class="n">info</span> <span class="o">=</span> <span class="s">"æ·»åŠ ç”¨æˆ·ä¿¡æ¯"</span><span class="o">;</span>
		<span class="k">return</span> <span class="s">"add"</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="c1">// æ›´æ–°ç”¨æˆ·ä¿¡æ¯</span>
	<span class="kd">public</span> <span class="nc">String</span> <span class="nf">update</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Exception</span><span class="o">{</span>
		<span class="n">info</span> <span class="o">=</span> <span class="s">"æ›´æ–°ç”¨æˆ·ä¿¡æ¯"</span><span class="o">;</span>
		<span class="k">return</span> <span class="s">"update"</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="kd">public</span> <span class="nc">String</span> <span class="nf">getInfo</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">info</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setInfo</span><span class="o">(</span><span class="nc">String</span> <span class="n">info</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">info</span> <span class="o">=</span> <span class="n">info</span><span class="o">;</span>
	<span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>struts.xml æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š
</code></pre></div></div>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="cp">&lt;!DOCTYPE struts PUBLIC
	"-//Apache Software Foundation//DTD Struts Configuration 2.1//EN"
	"http://struts.apache.org/dtds/struts-2.1.dtd"&gt;</span>
<span class="nt">&lt;struts&gt;</span>
	<span class="c">&lt;!-- å£°æ˜åŒ… --&gt;</span>
    <span class="nt">&lt;package</span> <span class="na">name=</span><span class="s">"myPackage"</span> <span class="na">extends=</span><span class="s">"struts-default"</span><span class="nt">&gt;</span>
    	<span class="c">&lt;!-- å®šä¹‰action --&gt;</span>
    	<span class="nt">&lt;action</span> <span class="na">name=</span><span class="s">"userAction"</span> <span class="na">class=</span><span class="s">"com.lyq.action.UserAction"</span><span class="nt">&gt;</span>
    		<span class="c">&lt;!-- æ·»åŠ æˆåŠŸçš„æ˜ å°„é¡µé¢ --&gt;</span>
    		<span class="nt">&lt;result</span> <span class="na">name=</span><span class="s">"add"</span><span class="nt">&gt;</span>user_add.jsp<span class="nt">&lt;/result&gt;</span>
    		<span class="c">&lt;!-- æ›´æ–°æˆåŠŸçš„æ˜ å°„é¡µé¢ --&gt;</span>
    		<span class="nt">&lt;result</span> <span class="na">name=</span><span class="s">"update"</span><span class="nt">&gt;</span>user_update.jsp<span class="nt">&lt;/result&gt;</span>
    	<span class="nt">&lt;/action&gt;</span>
    <span class="nt">&lt;/package&gt;</span>
<span class="nt">&lt;/struts&gt;</span></code></pre></figure>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>web.xml æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š
</code></pre></div></div>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;web-app</span> <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
	<span class="na">xmlns=</span><span class="s">"http://java.sun.com/xml/ns/javaee"</span> <span class="na">xmlns:web=</span><span class="s">"http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"</span>
	<span class="na">xsi:schemaLocation=</span><span class="s">"http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"</span>
	<span class="na">id=</span><span class="s">"WebApp_ID"</span> <span class="na">version=</span><span class="s">"2.5"</span><span class="nt">&gt;</span>
	<span class="nt">&lt;display-name&gt;</span>8.2<span class="nt">&lt;/display-name&gt;</span>
	<span class="nt">&lt;welcome-file-list&gt;</span>
		<span class="nt">&lt;welcome-file&gt;</span>index.html<span class="nt">&lt;/welcome-file&gt;</span>
		<span class="nt">&lt;welcome-file&gt;</span>index.htm<span class="nt">&lt;/welcome-file&gt;</span>
		<span class="nt">&lt;welcome-file&gt;</span>index.jsp<span class="nt">&lt;/welcome-file&gt;</span>
		<span class="nt">&lt;welcome-file&gt;</span>default.html<span class="nt">&lt;/welcome-file&gt;</span>
		<span class="nt">&lt;welcome-file&gt;</span>default.htm<span class="nt">&lt;/welcome-file&gt;</span>
		<span class="nt">&lt;welcome-file&gt;</span>default.jsp<span class="nt">&lt;/welcome-file&gt;</span>
	<span class="nt">&lt;/welcome-file-list&gt;</span><span class="c">&lt;!-- Struts2è¿‡æ»¤å™¨ --&gt;</span>
	<span class="nt">&lt;filter&gt;</span>
		<span class="c">&lt;!-- è¿‡æ»¤å™¨åç§° --&gt;</span>
		<span class="nt">&lt;filter-name&gt;</span>struts2<span class="nt">&lt;/filter-name&gt;</span>
		<span class="c">&lt;!-- è¿‡æ»¤å™¨ç±» --&gt;</span>
		<span class="nt">&lt;filter-class&gt;</span>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter<span class="nt">&lt;/filter-class&gt;</span>
	<span class="nt">&lt;/filter&gt;</span>
	<span class="c">&lt;!-- Struts2è¿‡æ»¤å™¨æ˜ å°„ --&gt;</span>
	<span class="nt">&lt;filter-mapping&gt;</span>
		<span class="c">&lt;!-- è¿‡æ»¤å™¨åç§° --&gt;</span>
		<span class="nt">&lt;filter-name&gt;</span>struts2<span class="nt">&lt;/filter-name&gt;</span>
		<span class="c">&lt;!-- è¿‡æ»¤å™¨æ˜ å°„ --&gt;</span>
		<span class="nt">&lt;url-pattern&gt;</span>/*<span class="nt">&lt;/url-pattern&gt;</span>
	<span class="nt">&lt;/filter-mapping&gt;</span>
<span class="nt">&lt;/web-app&gt;</span></code></pre></figure>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>index.jsp æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š
</code></pre></div></div>

<figure class="highlight"><pre><code class="language-jsp" data-lang="jsp"><span class="nt">&lt;%@ page </span><span class="na">language=</span><span class="s">"java"</span><span class="na"> contentType=</span><span class="s">"text/html; charset=UTF-8"</span><span class="na">
    pageEncoding=</span><span class="s">"UTF-8"</span><span class="nt">%&gt;</span>
<span class="cp">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">"Content-Type"</span> <span class="na">content=</span><span class="s">"text/html; charset=UTF-8"</span><span class="nt">&gt;</span>
<span class="nt">&lt;title&gt;</span>é¦–é¡µ<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
	<span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"userAction!add"</span><span class="nt">&gt;</span>æ·»åŠ ç”¨æˆ·<span class="nt">&lt;/a&gt;</span>
	<span class="nt">&lt;br&gt;</span>
	<span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"userAction!update"</span><span class="nt">&gt;</span>æ›´æ–°ç”¨æˆ·<span class="nt">&lt;/a&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span></code></pre></figure>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>user_add.jsp æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š
</code></pre></div></div>

<figure class="highlight"><pre><code class="language-jsp" data-lang="jsp"><span class="nt">&lt;%@ page </span><span class="na">language=</span><span class="s">"java"</span><span class="na"> contentType=</span><span class="s">"text/html; charset=UTF-8"</span><span class="na">
    pageEncoding=</span><span class="s">"UTF-8"</span><span class="nt">%&gt;</span>
<span class="nt">&lt;%@ taglib </span><span class="na">prefix=</span><span class="s">"s"</span><span class="na"> uri=</span><span class="s">"/struts-tags"</span> <span class="nt">%&gt;</span>
<span class="cp">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">"Content-Type"</span> <span class="na">content=</span><span class="s">"text/html; charset=UTF-8"</span><span class="nt">&gt;</span>
<span class="nt">&lt;title&gt;</span>æ·»åŠ ç”¨æˆ·ä¿¡æ¯<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
	<span class="nt">&lt;font</span> <span class="na">color=</span><span class="s">"red"</span><span class="nt">&gt;</span> 
		<span class="nt">&lt;s:property </span><span class="na">value=</span><span class="s">"info"</span><span class="nt">/&gt;</span>
	<span class="nt">&lt;/font&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span></code></pre></figure>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>user_update.jsp æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š
</code></pre></div></div>

<figure class="highlight"><pre><code class="language-jsp" data-lang="jsp"><span class="nt">&lt;%@ page </span><span class="na">language=</span><span class="s">"java"</span><span class="na"> contentType=</span><span class="s">"text/html; charset=UTF-8"</span><span class="na">
    pageEncoding=</span><span class="s">"UTF-8"</span><span class="nt">%&gt;</span>
<span class="nt">&lt;%@ taglib </span><span class="na">prefix=</span><span class="s">"s"</span><span class="na"> uri=</span><span class="s">"/struts-tags"</span> <span class="nt">%&gt;</span>
<span class="cp">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">"Content-Type"</span> <span class="na">content=</span><span class="s">"text/html; charset=UTF-8"</span><span class="nt">&gt;</span>
<span class="nt">&lt;title&gt;</span>æ›´æ–°ç”¨æˆ·ä¿¡æ¯<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
	<span class="nt">&lt;font</span> <span class="na">color=</span><span class="s">"red"</span><span class="nt">&gt;</span> 
		<span class="nt">&lt;s:property </span><span class="na">value=</span><span class="s">"info"</span><span class="nt">/&gt;</span>
	<span class="nt">&lt;/font&gt;</span>
<span class="nt">&lt;/body&gt;</span>

<span class="nt">&lt;/html&gt;</span></code></pre></figure>

<h3 id="struts2-çš„é…ç½®æ–‡ä»¶">Struts2 çš„é…ç½®æ–‡ä»¶</h3>

<p><img src="/assets/img/java_jsp/jsp-basic-26.png" alt="é…ç½®æ–‡ä»¶" /></p>

<p>å…¶ä¸­ struts.xml å’Œ struts.properties æ–‡ä»¶éœ€è¦å¼€å‘äººå‘˜ç¼–å†™ã€‚</p>

<h2 id="struts2-çš„åŒ…é…ç½®">Struts2 çš„åŒ…é…ç½®</h2>

<p>Strutsé…ç½®éƒ½æ˜¯è‡³äºæ ‡ç­¾<code class="language-plaintext highlighter-rouge">&lt;&gt;struts&gt;</code>ä¸­ã€‚<code class="language-plaintext highlighter-rouge">&lt;package&gt;</code>è¿™ç§åŒ…å¯ä»¥ç†è§£ä¸ºé…ç½®æ–‡ä»¶ä¸­çš„ä¸€ä¸ªé€»è¾‘å•å…ƒï¼Œæé«˜äº†å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ï¼›å¯ä»¥ç»§æ‰¿ï¼Œä»è€Œæé«˜äº†é…ç½®æ–‡ä»¶çš„é‡ç”¨æ€§ã€‚</p>

<p>åŒ…ä½¿ç”¨<code class="language-plaintext highlighter-rouge">&lt;package&gt;</code>è¿›è¡Œå£°æ˜ï¼Œå®ƒå¿…é¡»æœ‰ä¸€ä¸ªnameå±æ€§æ¥æŒ‡å®šåŒ…çš„åç§°ï¼Œ<code class="language-plaintext highlighter-rouge">&lt;package&gt;</code>å…ƒç´ æ‰€åŒ…å«çš„å±æ€§å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>

<p><img src="/assets/img/java_jsp/jsp-basic-27.png" alt="packageå±æ€§" /></p>

<p>å…¶ä¸­åç§°ç©ºé—´namespaceç”¨äºæŒ‡å®šä¸€ä¸ªActionå¯¹è±¡çš„è®¿é—®è·¯å¾„ï¼Œè¿åˆäº†Webæ–‡ä»¶ç›®å½•é€šå¸¸ä»¥æ¨¡å—è¿›è¡Œåˆ’åˆ†çš„éœ€æ±‚ã€‚</p>

<p><img src="/assets/img/java_jsp/jsp-basic-28.png" alt="æ³¨æ„å‘½åç©ºé—´ " /></p>

<h2 id="action-ç›¸å…³é…ç½®">Action ç›¸å…³é…ç½®</h2>

<p>Struts 2 æ¡†æ¶ä¸­çš„ Action å¯¹è±¡ï¼Œæ˜¯ä¸€ä¸ªæ§åˆ¶å™¨çš„è§’è‰²ã€‚Struts 2 æ¡†æ¶é€šè¿‡ Action å¯¹è±¡å¤„ç† HTTP è¯·æ±‚ï¼Œå…¶è¯·æ±‚åœ°å€çš„æ˜ å°„éœ€è¦é…ç½®åœ¨
 struts.xmlæ–‡ä»¶ä¸­ï¼Œå®ƒçš„é…ç½®æ–¹å¼ä½¿ç”¨<code class="language-plaintext highlighter-rouge">&lt;&lt;action &gt;</code>å…ƒç´ è¿›è¡Œé…ç½®ã€‚è¯¥æ ‡ç­¾ç”±äºå»ºç«‹ Action å¯¹è±¡çš„æ˜ å°„ï¼Œé€šè¿‡<code class="language-plaintext highlighter-rouge">&lt;action &gt;</code>å…ƒç´ 
å¯ä»¥æŒ‡å®š Action è¯·æ±‚åœ°å€åŠæ ¹æ®å¤„ç†ç»“æœæ¥æ˜ å°„é¡µé¢ï¼ˆè¯¥é¡µé¢å¯ä»¥ç”¨äºè·å–å¯¹è±¡çš„ä¸€äº›ä¿¡æ¯æˆ–ç»“æœç­‰ï¼‰ã€‚è¯¥æ ‡ç­¾çš„å±æ€§å¦‚ä¸‹ï¼š</p>

<p><img src="/assets/img/java_jsp/jsp-basic-29.png" alt="Actionå±æ€§" /></p>

<p><img src="/assets/img/java_jsp/jsp-basic-30.png" alt="Actionå±æ€§" /></p>

<p>å…¶ä¸­ method å±æ€§ä¸»è¦ç”¨äºå¯¹ä¸€ä¸ª action è¯·æ±‚åˆ†å‘ä¸€ä¸ªæŒ‡å®šä¸šåŠ¡é€»è¾‘æ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œå°†<code class="language-plaintext highlighter-rouge">&lt;action&gt;</code>å…ƒç´ çš„ method å±æ€§å€¼è®¾ç½®ä¸º â€œaddâ€,
é‚£ä¹ˆè¿™ä¸ªè¯·æ±‚å°±ä¼šè¢«äº¤ç»™ Action å¯¹è±¡çš„ add() æ–¹æ³•è¿›è¡Œå¤„ç†ï¼Œæ­¤ç§é…ç½®æ–¹æ³•å¯ä»¥å‡å°‘ Action å¯¹è±¡æ•°ç›®ï¼ˆå¦‚æœæ²¡æœ‰ method å±æ€§åˆ™é»˜è®¤
æ‰§è¡Œ execute() æ–¹æ³•ï¼Œå¦‚æ­¤æ‰§è¡Œå¤šä¸ªåŠŸèƒ½å°±è¦æ±‚æœ‰å¤šä¸ªå¯¹è±¡ï¼‰</p>

<p><img src="/assets/img/java_jsp/jsp-basic-31.png" alt="methodæ³¨æ„" /></p>

<p>Struts 2 é…ç½®æ–‡ä»¶ struts.xml ä¸­æ”¯æŒé€šé…ç¬¦ã€‚æ­¤ç§é…ç½®æ–¹å¼ä¸»è¦é’ˆå¯¹éå¸¸å¤š Action çš„æƒ…å†µï¼Œé€šè¿‡ä¸€å®šçš„å‘½åçº¦å®šï¼Œä½¿ç”¨é€šé…ç¬¦æ¥é…ç½®
 Action å¯¹è±¡ï¼Œä»¥è¾¾åˆ°ä¸€ç§å®¶æš–é…ç½®çš„æ•ˆæœã€‚é€šé…ç¬¦ä¸»è¦æœ‰ä¸¤ä¸ª: é€šé…ç¬¦ <code class="language-plaintext highlighter-rouge">"*"</code> ä¸ <code class="language-plaintext highlighter-rouge">"\"</code>ã€‚</p>

<ul>
  <li>é€šé…ç¬¦ <code class="language-plaintext highlighter-rouge">"*"</code> åŒ¹é…0æˆ–å¤šä¸ªå­—ç¬¦ã€‚</li>
  <li>é€šé…ç¬¦ <code class="language-plaintext highlighter-rouge">"\"</code> æ˜¯ä¸€ä¸ªè½¬ä¹‰å­—ç¬¦ï¼Œå¦‚éœ€è¦åŒ¹é… <code class="language-plaintext highlighter-rouge">"\"</code> ,åˆ™ä½¿ç”¨ â€œ\/â€ è¿›è¡ŒåŒ¹é…ã€‚</li>
</ul>

<p>ä¾‹å¦‚ï¼Œ<code class="language-plaintext highlighter-rouge">&lt;action&gt;</code>å…ƒç´ çš„ name å±æ€§çš„å€¼ä¸º â€œadd* â€œ ï¼Œå®ƒåŒ¹é…çš„æ˜¯ä»¥å­—ç¬¦ â€œaddâ€ å¼€å¤´çš„å­—ç¬¦ä¸²ï¼Œå¦‚â€addUserâ€, â€œaddBookâ€éƒ½å¯ä»¥åŒ¹é…ã€‚
å¯¹äºé€šé…ç¬¦æ‰€åŒ¹é…çš„å­—ç¬¦ï¼Œåœ¨ Struts 2 æ¡†æ¶çš„é…ç½®æ–‡ä»¶ä¸­æ˜¯å¯ä»¥è·å–çš„ï¼Œå®ƒä½¿ç”¨è¡¨è¾¾å¼ {1} ã€{2} ã€ {3} çš„æ–¹å¼è¿›è¡Œè·å–ã€‚</p>

<h2 id="è¿”å›ç»“æœçš„é…ç½®">è¿”å›ç»“æœçš„é…ç½®</h2>

<p>Acton å¯¹è±¡æ˜¯ Struts 2 æ¡†æ¶ä¸­çš„è¯·æ±‚å¤„ç†å¯¹è±¡ï¼Œé’ˆå¯¹ä¸åŒçš„ä¸šåŠ¡è¯·æ±‚ï¼ˆå¦‚è°ƒç”¨Actionå¯¹è±¡çš„ä¸åŒæ–¹æ³•ï¼‰åŠå¤„ç†ç»“æœï¼ˆæ–¹æ³•è¿”å›å€¼ï¼ˆï¼Œ
Action å°†è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼ˆActionSupportä¸­å®šä¹‰äº†è‹¥å¹²å­—ç¬¦ä¸²å¸¸é‡ï¼‰ï¼Œè¿™ä¸ªå­—ç¬¦ä¸²å°±æ˜¯ Action å¤„ç†ç»“æœçš„é€»è¾‘è§†å›¾åã€‚ Struts 2 æ¡†æ¶
å°†æ ¹æ®é€»è¾‘è§†å›¾åç§°ï¼Œåˆ°é…ç½®æ–‡ä»¶ struts.xml ä¸­æŸ¥æ‰¾é€»è¾‘è§†å›¾ååŒ¹é…çš„è§†å›¾ï¼ˆå¦‚htmlæ–‡ä»¶ï¼‰ï¼Œåœ¨æ‰¾åˆ°ä¹‹åå°†è¿™ä¸ªè§†å›¾å›åº”æµè§ˆå™¨ã€‚å…·ä½“
è§ä¸‹å›¾ï¼š</p>

<p><img src="/assets/img/java_jsp/jsp-basic-32.png" alt="è¿”å›ç»“æœé…ç½®" /></p>

<p>åœ¨é…ç½®æ–‡ä»¶ struts.xml æ–‡ä»¶ä¸­ï¼Œç»“æœæ˜ å°„ä½¿ç”¨<code class="language-plaintext highlighter-rouge">&lt;result&gt;</code>è¿›è¡Œæ˜ å°„ã€‚è¯¥å…ƒç´ æœ‰ä¸¤ä¸ªå±æ€§ï¼Œåˆ†åˆ«ä¸º <code class="language-plaintext highlighter-rouge">name</code> å±æ€§ï¼ˆé»˜è®¤å€¼ä¸º SUCCESSï¼‰ã€<code class="language-plaintext highlighter-rouge">type</code> å±æ€§ã€‚å…¶ä¸­ï¼Œ
name å±æ€§ç”¨äºæŒ‡å®š Result çš„é€»è¾‘åç§°ï¼Œå®ƒä¸ Action å¯¹è±¡ä¸­æ–¹æ³•çš„è¿”å›å€¼ç›¸å¯¹åº”ï¼Œ å¦‚ execute() æ–¹æ³•è¿”å›å€¼ä¸º â€œinputâ€ ï¼Œé‚£ä¹ˆå°±å°†<code class="language-plaintext highlighter-rouge">&lt;result&gt;</code>
å…ƒç´ çš„ name å±æ€§é…ç½®ä¸º â€œinputâ€ å¯¹åº” Action å¯¹è±¡è¿”å›å€¼ã€‚ <code class="language-plaintext highlighter-rouge">&lt;result&gt;</code>å…ƒç´ çš„ type å±æ€§ç”¨äºè®¾ç½®è¿”å›å€¼ç»“æœçš„ç±»å‹ï¼Œå¦‚è¯·æ±‚è½¬å‘ã€é‡å®šå‘ç­‰ã€‚</p>

<h2 id="ognlè¡¨è¾¾å¼">OGNLè¡¨è¾¾å¼</h2>

<p>Struts 2 çš„é«˜çº§æŠ€æœ¯éƒ¨åˆ†ï¼Œæ¶‰åŠåˆ°OGNLè¡¨è¾¾å¼ã€Struts 2 æ ‡ç­¾åº“ã€æ‹¦æˆªå™¨ã€éªŒè¯æ¡†æ¶ç­‰</p>

<p>OGNLï¼ˆObject Graph Navigation Languageï¼‰æ˜¯ä¸€ç§å¼ºå¤§çš„è¡¨è¾¾å¼è¯­è¨€ï¼Œå®ƒèƒ½å¤Ÿè‡ªåŠ¨å¯¼èˆªå¯¹è±¡çš„ç»“æ„å¹¶è®¿é—®å’Œè®¾ç½®å¯¹è±¡æ•°æ®ã€‚åœ¨ OGNL è¡¨è¾¾å¼ä¸­ï¼Œ
å®ƒçš„æ ¸å¿ƒå¯¹è±¡ä¸º OGNL ä¸Šä¸‹æ–‡ã€‚OGNL ä¸Šä¸‹æ–‡ç›¸å½“äºä¸€ä¸ª Map å®¹å™¨ï¼Œåœ¨ Map å®¹å™¨çš„ Value ä¸­å¯ä»¥ä¿å­˜ä»»ä½•ç±»å‹çš„æ•°æ®ï¼Œé€šè¿‡ OGNL ä¸Šä¸‹æ–‡å¯ä»¥
å¯¹å®¹å™¨ä¸­çš„å¯¹è±¡è¿›è¡Œå¯¼èˆªã€‚ Struts 2 æ ‡ç­¾çš„åº”ç”¨éœ€è¦ OGNL çš„æ”¯æŒã€‚</p>

<h2 id="struts-2-æ ‡ç­¾åº“">Struts 2 æ ‡ç­¾åº“</h2>

<p>Struts 2 çš„æ ‡ç­¾ä¸»è¦åŒ…æ‹¬æ•°æ®æ ‡ç­¾ã€æ§åˆ¶æ ‡ç­¾ã€è¡¨å•æ ‡ç­¾ï¼Œè¿™äº›æ ‡ç­¾å¯ä»¥ç®€åŒ–ç¨‹åºçš„å¼€å‘ã€‚</p>

<h2 id="æ‹¦æˆªå™¨çš„ä½¿ç”¨">æ‹¦æˆªå™¨çš„ä½¿ç”¨</h2>

<p>æ‹¦æˆªå™¨ï¼ˆInterceptorï¼‰æ˜¯ Struts 2 æ¡†æ¶ä¸­ä¸€ä¸ªéå¸¸é‡è¦çš„æ ¸å¿ƒå¯¹è±¡ï¼Œå®ƒå¯ä»¥åŠ¨æ€å¢å¼º Action å¯¹è±¡çš„åŠŸèƒ½ï¼Œåœ¨ Struts 2 æ¡†æ¶ä¸­ï¼Œå¾ˆå¤š
é‡è¦åŠŸèƒ½éƒ½æ˜¯é€šè¿‡æ‹¦æˆªå™¨è¿›è¡Œå®ç°çš„ã€‚</p>

<h2 id="struts-2-éªŒè¯æ¡†æ¶">Struts 2 éªŒè¯æ¡†æ¶</h2>

<p>è™½ç„¶ Struts 2 çš„æ•°æ®éªŒè¯å¯ä»¥åœ¨ Action å¯¹è±¡ä¹‹ä¸­è¿›è¡Œå¤„ç†ï¼Œè€Œä¸”å®ç°éªŒè¯æ–¹æ³•ä¹Ÿæœ‰å¾ˆå¤šç§ï¼Œä½†åœ¨ Action å¯¹è±¡ä¹‹ä¸­ï¼Œé€šè¿‡ç¼–å†™ Java ä»£ç 
è¿›è¡Œæ•°æ®çš„éªŒè¯å­˜åœ¨ä¸€å®šçš„ç¼ºç‚¹ã€‚é€šè¿‡ Struts 2 çš„éªŒè¯æ¡†æ¶å¯¹æ•°æ®è¿›è¡ŒéªŒè¯ï¼Œå…¶éªŒè¯æ•ˆæœå®‰å…¨ã€æ–¹ä¾¿ã€‚ç”±äºå®ƒä½œç”¨äºæœåŠ¡å™¨ç«¯ï¼Œå‰å°æµè§ˆå™¨
ä¸èƒ½ä½¿ç”¨å…¶ä»–æ–¹æ³•ç»•è¿‡éªŒè¯ï¼Œå› è€Œè¯¥æŠ€æœ¯ååˆ†å¸¸ç”¨ã€‚</p>

<h1 id="æ•°æ®åº“æŒä¹…åŒ–æŠ€æœ¯-hibernate">æ•°æ®åº“æŒä¹…åŒ–æŠ€æœ¯ Hibernate</h1>

<p>é¢å‘å¯¹è±¡æ˜¯ä¹³å°–å¼€å‘çš„åŸºæœ¬æ€æƒ³ï¼Œè€Œå…³ç³»æ•°æ®åº“åˆæ˜¯åº”ç”¨ç³»ç»Ÿä¸­å¯å¯ç¼ºå°‘çš„ä¸€ç¯ã€‚ä¸ºäº†ç»Ÿä¸€ä¸ºé¢å‘å¯¹è±¡æ€æƒ³ä¾¿å‡ºç°äº† ORM æŠ€æœ¯ã€‚
ORM ï¼ˆObject Relational Mappingï¼‰æ˜¯å¯¹è±¡åˆ°å…³ç³»çš„æ˜ å°„ï¼Œå®ƒçš„ä½œç”¨æ˜¯åœ¨å…³ç³»æ•°æ®åº“å’Œå¯¹è±¡ä¹‹é—´åšä¸€ä¸ªè‡ªåŠ¨æ˜ å°„ï¼Œå°†æ•°æ®åº“ä¸­æ•°æ®è¡¨æ˜ å°„
æˆä¸ºå¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯æŒä¹…åŒ–ç±»ï¼Œå¯¹å…³ç³»å‹æ•°æ®ä»¥å¯¹è±¡çš„å½¢å¼è¿›è¡Œæ“ä½œï¼Œä»¥å‡å°‘åº”ç”¨å¼€å‘è¿‡ç¨‹ä¸­æ•°æ®æŒä¹…åŒ–çš„ç¼–ç¨‹ä»»åŠ¡ã€‚å¯ä»¥æŠŠ ORM ç†è§£æˆå…³ç³»
å‹æ•°æ®å’Œå¯¹è±¡çš„ä¸€ä¸ªçº½å¸¦ï¼Œå¼€å‘äººå‘˜å…³æ³¨çº½å¸¦çš„ä¸€æ®µæ˜ å°„çš„å¯¹è±¡å³å¯ã€‚ORM åŸç†å›¾å¦‚ä¸‹ï¼š</p>

<p><img src="/assets/img/java_jsp/jsp-basic-33.png" alt="ORM åŸç†å›¾L" /></p>

<p>Hibernate æ˜¯ä¼—å¤š ORM å·¥å…·ä¸­çš„ä½¼ä½¼è€…ï¼Œç›¸å¯¹äº iBATISï¼Œå®ƒæ˜¯å…¨è‡ªåŠ¨çš„å…³ç³»/å¯¹è±¡çš„è§£å†³æ–¹æ¡ˆã€‚ Hibernate é€šè¿‡æŒä¹…åŒ–ç±» (<em>.java)ã€
æ˜ å°„æ–‡ä»¶ (</em>.hbm.xml) å’Œé…ç½®æ–‡ä»¶ (*.cfg.xml) æ“ä½œå…³ç³»å‹æ•°æ®åº“ï¼Œä½¿å¼€å‘äººå‘˜ä¸å¿…å†ä¸å¤æ‚çš„ SQL è¯­å¥æ‰“äº¤é“ã€‚</p>

<h2 id="hibernate-ç®€ä»‹">Hibernate ç®€ä»‹</h2>

<p>Hibernate å……åˆ†ä½“ç°äº† ORM çš„è®¾è®¡ç†å¿µã€æä¾›äº†é«˜æ•ˆçš„å¯¹è±¡åˆ°å…³ç³»å‹æ•°æ®åº“çš„æŒä¹…åŒ–æœåŠ¡ã€‚å®ƒçš„æŒä¹…åŒ–æœåŠ¡ä»è½¯ä»¶ä¸šåŠ¡å®Œå…¨æŠ½å–å‡ºæ¥ï¼Œè®©
ä¸šåŠ¡é€»è¾‘çš„å¤„ç†æ›´åŠ ç®€å•ï¼Œç¨‹åºä¹‹é—´çš„å„ç§ä¸šåŠ¡å¹¶éç´§å¯†è€¦åˆï¼Œæ›´åŠ æœ‰åˆ©äºé«˜æ•ˆåœ°å¼€å‘ä¸ç»´æŠ¤ã€‚Hibernate ä½“ç³»æ¦‚è¦å›¾å¦‚ä¸‹ï¼š</p>

<p><img src="/assets/img/java_jsp/jsp-basic-34.png" alt="Hibernate æ¦‚è¦å›¾" /></p>

<p>ä»è¿™ä¸ªæ¦‚è¦å›¾å¯ä»¥çœ‹å‡ºï¼ŒHibernate é€šè¿‡æ•°æ®åº“å’Œé…ç½®ä¿¡æ¯è¿›è¡Œæ•°æ®æŒä¹…åŒ–æœåŠ¡å’ŒæŒä¹…åŒ–å¯¹è±¡ã€‚ Hibernate å°è£…äº†æ•°æ®åº“çš„è®¿é—®ç»†èŠ‚ï¼Œ
é€šè¿‡é…ç½®çš„å±æ€§æ–‡ä»¶è¿™æ¡çº½å¸¦è¿æ¥ç€å…³ç³»å‹æ•°æ®åº“å’Œç¨‹åºä¸­çš„å®ä½“ç±»ã€‚</p>

<p>åœ¨ Hibernate ä¸­æœ‰éå¸¸é‡è¦çš„3ä¸ªç±»ï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯é…ç½®ç±»ï¼ˆConfigurationï¼‰ã€å›è¯å·¥å‚ç±»ï¼ˆsessionFactoryï¼‰å’Œä¼šè¯ç±»ï¼ˆsessionï¼‰ã€‚</p>

<ul>
  <li>é…ç½®ç±»ï¼š</li>
</ul>

<p>ä¸»è¦è´Ÿè´£ç®¡ç† Hibernate çš„é…ç½®ä¿¡æ¯ä»¥åŠå¯åŠ¨ Hibernateã€‚åœ¨ Hibernate è¿è¡Œæ—¶é…ç½®ç±»ä¼šè¯»å–ä¸€äº›åº•å±‚å®ç°çš„åŸºæœ¬ä¿¡æ¯ï¼Œ
å…¶ä¸­åŒ…æ‹¬æ•°æ®åº“ URLã€æ•°æ®åº“ç”¨æˆ·åã€æ•°æ®åº“ç”¨æˆ·å¯†ç ã€æ•°æ®åº“æœåŠ¡ç±»å’Œæ•°æ®åº“é€‚é…å™¨ï¼ˆdialectï¼‰ã€‚</p>

<ul>
  <li>ä¼šè¯å·¥å‚ç±»ï¼š</li>
</ul>

<p>å®ƒæ˜¯ç”Ÿæˆ session çš„å·¥å‚ï¼Œå®ƒä¿å­˜äº†å½“å‰æ•°æ®åº“ä¸­æ‰€æœ‰çš„æ˜ å°„å…³ç³»ï¼Œå¯èƒ½åªæœ‰ä¸€ä¸ªå¯é€‰çš„äºŒçº§æ•°æ®ç¼“å­˜ï¼Œå¹¶ä¸”å®ƒæ˜¯çº¿ç¨‹å®‰å…¨
çš„ã€‚ä½†æ˜¯ï¼Œå®ƒæ˜¯ä¸€ä¸ªé‡é‡çº§çš„å¯¹è±¡ï¼Œå®ƒçš„åˆå§‹åŒ–åˆ›å»ºè¿‡ç¨‹ä¼šè€—è´¹å¤§é‡çš„ç³»ç»Ÿèµ„æºã€‚</p>

<ul>
  <li>ä¼šè¯ç±»ï¼š</li>
</ul>

<p>å®ƒæ˜¯ Hibernate ä¸­æ•°æ®åº“æŒä¹…åŒ–æ“ä½œçš„æ ¸å¿ƒï¼Œå®ƒå°†è´Ÿè´£ Hibernate æ‰€æœ‰çš„æŒä¹…åŒ–æ“ä½œï¼Œé€šè¿‡å¼€å‘äººå‘˜å¯ä»¥å®ç°æ•°æ®åº“åŸºæœ¬çš„
å¢ã€åˆ ã€æ”¹ã€å·®çš„æ“ä½œã€‚ä½†ä¼šè¯ç±»å¹¶ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œåº”æ³¨æ„ä¸è¦å¤šä¸ªçº¿ç¨‹å…±äº«ä¸€ä¸ª sessionã€‚</p>

<h2 id="hibernate-å…¥é—¨">Hibernate å…¥é—¨</h2>

<p>ä» Hibernate çš„å®˜æ–¹ç½‘ç«™å¯ä»¥å…è´¹è·å– Hibernate çš„å¸®åŠ©æ–‡æ¡£å’Œ.jaråŒ…ã€‚ç„¶åï¼Œå°† hibernateXXX.jar çš„åŒ…å’Œ lib ç›®å½•ä¸‹çš„æ‰€æœ‰çš„ .jar åŒ…
å¯¼å…¥åˆ°é¡¹ç›®ï¼ˆWebé¡¹ç›®çš„libæ–‡ä»¶å¤¹ï¼‰ä¸­ï¼Œå°±å¯ä»¥è¿›è¡Œ Hibernate çš„é¡¹ç›®å¼€å‘ã€‚</p>

<h3 id="hibernate-é…ç½®æ–‡ä»¶">Hibernate é…ç½®æ–‡ä»¶</h3>

<p>Hibernate é€šè¿‡è¯»å–é»˜è®¤çš„ XML é…ç½®æ–‡ä»¶ Hibernate.cfg.xml åŠ è½½æ•°æ®åº“é…ç½®ä¿¡æ¯ï¼Œè¯¥é…ç½®æ–‡ä»¶è¢«é»˜è®¤æ”¾åœ¨é¡¹ç›®çš„ classes ç›®å½•ä¸‹ã€‚
æ•°æ®åº“çš„é…ç½®ä¿¡æ¯ç”¨<code class="language-plaintext highlighter-rouge">&lt;property&gt;</code>å…ƒç´ è¿›è¡Œé…ç½®ï¼Œå…¶å¸¸ç”¨å±æ€§å¦‚ä¸‹å›¾ï¼š</p>

<p><img src="/assets/img/java_jsp/jsp-basic-35.png" alt="" /></p>

<p>åœ¨ç¨‹åºå¼€å‘è¿‡ç¨‹ä¸­ï¼Œä¸€èˆ¬ä¼šå°† show_sql å±æ€§è®¾ç½®ä¸º true,ä»¥ä¾¿åœ¨æ§åˆ¶å°æ‰“å°è‡ªåŠ¨ç”Ÿæˆçš„ SQL è¯­å¥ï¼Œæ–¹ä¾¿ç¨‹åºè°ƒè¯•ã€‚</p>

<h3 id="äº†è§£å¹¶ç¼–å†™æŒä¹…åŒ–ç±»">äº†è§£å¹¶ç¼–å†™æŒä¹…åŒ–ç±»</h3>

<p>åœ¨ Hibernate ä¸­æŒä¹…åŒ–å¯ Hibernate æ“ä½œçš„å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯é€šè¿‡å¯¹è±¡-å…³ç³»æ˜ å°„ï¼ˆ ORM ï¼‰åæ•°æ®è¡¨æ‰€æ˜ å°„çš„å®ä½“ç±»ï¼Œç”¨æ¥æè¿°æ•°æ®åº“è¡¨çš„
ç»“æ„ä¿¡æ¯ã€‚æŒä¹…åŒ–ç±»ä¸­å±æ€§åº”è¯¥ä¸æ•°æ®åº“ä¸­å­—æ®µç›¸åŒ¹é…ã€‚æŒä¹…åŒ–ç±»ç¬¦åˆæœ€åŸºæœ¬çš„ JavaBean ç¼–ç¨‹è§„èŒƒï¼Œä¹Ÿå°±æ˜¯ POJO ï¼ˆ Plain Old Java Object ï¼‰
ç¼–ç¨‹æ¨¡å‹ã€‚å…¶æ¯ä¸ªå±æ€§éƒ½æœ‰ç›¸åº”çš„ set() å’Œ get() æ–¹æ³•ï¼Œå®ƒå¸ƒä¾èµ–äºä»»ä½•æ¥å£å’Œç»§æ‰¿ä»»ä½•ç±»ã€‚</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ä¸‹é¢ç»™å‡ºä¸€ä¸ªå•†å“ä¿¡æ¯çš„æŒä¹…åŒ–ç±»ç¤ºä¾‹ï¼Œproduct.java æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š
</code></pre></div></div>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="nn">com.mr.product</span><span class="o">;</span>
<span class="cm">/**
 * å•†å“ä¿¡æ¯çš„æŒä¹…åŒ–ç±»
 */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Product</span> <span class="o">{</span>
	
	<span class="kd">private</span> <span class="nc">Integer</span> <span class="n">id</span><span class="o">;</span><span class="c1">//å”¯ä¸€æ€§æ ‡è¯†</span>
	<span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span><span class="c1">//äº§å“åç§°</span>
	<span class="kd">private</span> <span class="nc">Double</span> <span class="n">price</span><span class="o">;</span><span class="c1">//äº§å“ä»·æ ¼</span>
	<span class="kd">private</span> <span class="nc">String</span> <span class="n">factory</span><span class="o">;</span><span class="c1">//ç”Ÿäº§å•†</span>
	<span class="kd">private</span> <span class="nc">String</span> <span class="n">remark</span><span class="o">;</span><span class="c1">//å¤‡æ³¨</span>
	
	<span class="kd">public</span> <span class="nc">Integer</span> <span class="nf">getId</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">id</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setId</span><span class="o">(</span><span class="nc">Integer</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">id</span> <span class="o">=</span> <span class="n">id</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="kd">public</span> <span class="nc">String</span> <span class="nf">getName</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">name</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setName</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="kd">public</span> <span class="nc">Double</span> <span class="nf">getPrice</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">price</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setPrice</span><span class="o">(</span><span class="nc">Double</span> <span class="n">price</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">price</span> <span class="o">=</span> <span class="n">price</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="kd">public</span> <span class="nc">String</span> <span class="nf">getFactory</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">factory</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setFactory</span><span class="o">(</span><span class="nc">String</span> <span class="n">factory</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">factory</span> <span class="o">=</span> <span class="n">factory</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="kd">public</span> <span class="nc">String</span> <span class="nf">getRemark</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">remark</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setRemark</span><span class="o">(</span><span class="nc">String</span> <span class="n">remark</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">remark</span> <span class="o">=</span> <span class="n">remark</span><span class="o">;</span>
	<span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Hibernate ä¸­çš„æŒä¹…åŒ–ç±»æœ‰ 4 æ¡ç¼–ç¨‹è§„åˆ™ï¼š
</code></pre></div></div>

<ul>
  <li>å®ç°ä¸€ä¸ªé»˜è®¤çš„æ„é€ å‡½æ•°ï¼š</li>
</ul>

<p>æ‰€æœ‰æŒä¹…åŒ–ç±»ä¸­å¿…é¡»å«æœ‰ä¸€ä¸ªé»˜è®¤çš„æ— å‚æ•°æ„é€ æ–¹æ³•ï¼Œä»¥ä¾¿ Hibernate é€šè¿‡ Constructor.newInstance() å®ä¾‹
åŒ–æŒä¹…åŒ–ç±»ã€‚</p>

<ul>
  <li>æä¾›ä¸€ä¸ªæ ‡è¯†å±æ€§ï¼ˆå¯é€‰ï¼‰ï¼š</li>
</ul>

<p>æ ‡è¯†å±æ€§ä¸€èˆ¬æ˜ å°„çš„æ˜¯æ•°æ®åº“è¡¨ä¸­ä¸»é”®å­—æ®µã€‚å»ºè®®åœ¨æŒä¹…åŒ–ç±»ä¸­æ·»åŠ ä¸€è‡´çš„æ ‡è¯†å±æ€§ã€‚</p>

<ul>
  <li>ä½¿ç”¨é final ç±»ï¼ˆå¯é€‰ï¼‰ï¼š</li>
</ul>

<p>å¦‚æœä½¿ç”¨äº† final ç±»ï¼ŒHibernate å°±ä¸èƒ½ä½¿ç”¨ä»£ç†æ¥å»¶è¿Ÿå…³è”åŠ è½½ï¼Œè¿™ä¼šå½±å“å¼€å‘äººå‘˜è¿›è¡Œæ€§èƒ½ä¼˜åŒ–çš„é€‰æ‹©ã€‚</p>

<ul>
  <li>ä¸ºå±æ€§å£°æ˜è®¿é—®å™¨ ï¼ˆå¯é€‰ï¼‰ï¼š</li>
</ul>

<p>æŒä¹…åŒ–ç±»çš„å±æ€§ä¸èƒ½å£°æ˜ä¸º public çš„ï¼Œæœ€å¥½ä»¥ public çš„ set() å’Œ get() æ–¹æ³•å¯¹ private å±æ€§è¿›è¡ŒæŒä¹…åŒ–ã€‚</p>

<h3 id="hibernate-æ˜ å°„">Hibernate æ˜ å°„</h3>

<p>Hibernate çš„æ ¸å¿ƒå°±æ˜¯å¯¹è±¡å…³ç³»æ˜ å°„ï¼Œå¯¹è±¡å’Œå…³ç³»å‹æ•°æ®åº“ä¹‹é—´çš„æ˜ å°„é€šå¸¸æ˜¯ç”¨ XML æ–‡æ¡£æ¥å®ç°çš„ã€‚è¿™ä¸ªæ˜ å°„æ–‡æ¡£è¢«è®¾è®¡æˆæ˜“è¯»çš„ï¼Œå¹¶ä¸”å¯ä»¥
æ‰‹å·¥ä¿®æ”¹ã€‚æ˜ å°„æ–‡ä»¶çš„å‘½åè§„åˆ™ä¸º <em>.hbm.xmlï¼ˆä¸ç›¸åº”çš„æŒä¹…åŒ–ç±»</em>.javaæ–‡ä»¶æ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œæ³¨æ„ä¸¤ * è¡¨ç¤ºåŒåï¼‰ã€‚</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ä»¥ä¸Šä¾‹å•†å“ä¿¡æ¯æŒä¹…åŒ–ç±»å¯¹åº”çš„æ˜ å°„æ–‡ä»¶ä¸ºä¾‹ï¼Œproduct.hbm.xml æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š
</code></pre></div></div>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="cp">&lt;!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
 "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd"&gt;</span>
 <span class="c">&lt;!-- äº§å“ä¿¡æ¯å­—æ®µé…ç½®ä¿¡æ¯ --&gt;</span>
 <span class="nt">&lt;hibernate-mapping&gt;</span>
 	<span class="nt">&lt;class</span> <span class="na">name=</span><span class="s">"com.mr.product.Product"</span> <span class="na">table=</span><span class="s">"tab_product"</span><span class="nt">&gt;</span>
 		<span class="c">&lt;!-- idå€¼ --&gt;</span>
 		<span class="nt">&lt;id</span> <span class="na">name=</span><span class="s">"id"</span> <span class="na">column=</span><span class="s">"id"</span> <span class="na">type=</span><span class="s">"int"</span><span class="nt">&gt;</span>
			<span class="nt">&lt;generator</span> <span class="na">class=</span><span class="s">"native"</span><span class="nt">/&gt;</span>
		<span class="nt">&lt;/id&gt;</span>
		<span class="c">&lt;!-- äº§å“åç§° --&gt;</span>
		<span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"name"</span> <span class="na">type=</span><span class="s">"string"</span> <span class="na">length=</span><span class="s">"45"</span><span class="nt">&gt;</span>
			<span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"name"</span><span class="nt">/&gt;</span>
		<span class="nt">&lt;/property&gt;</span>
		<span class="c">&lt;!-- äº§å“ä»·æ ¼ --&gt;</span>
		<span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"price"</span> <span class="na">type=</span><span class="s">"double"</span><span class="nt">&gt;</span>
			<span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"price"</span><span class="nt">/&gt;</span>
		<span class="nt">&lt;/property&gt;</span>
		<span class="c">&lt;!-- ç”Ÿäº§å‚å•† --&gt;</span>
		<span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"factory"</span> <span class="na">type=</span><span class="s">"string"</span> <span class="na">length=</span><span class="s">"45"</span><span class="nt">&gt;</span>
			<span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"factory"</span><span class="nt">/&gt;</span>
		<span class="nt">&lt;/property&gt;</span>
		<span class="c">&lt;!-- å¤‡æ³¨ --&gt;</span>
		<span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"remark"</span> <span class="na">type=</span><span class="s">"string"</span> <span class="na">length=</span><span class="s">"100"</span><span class="nt">&gt;</span>
			<span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"remark"</span><span class="nt">/&gt;</span>
		<span class="nt">&lt;/property&gt;</span>
 	<span class="nt">&lt;/class&gt;</span>
 <span class="nt">&lt;/hibernate-mapping&gt;</span></code></pre></figure>

<p><img src="/assets/img/java_jsp/jsp-basic-36.png" alt="Hibernateæ˜ å°„æ—¶æ³¨æ„" /></p>

<h2 id="hibernate-æ•°æ®æŒä¹…åŒ–">Hibernate æ•°æ®æŒä¹…åŒ–</h2>

<p>Hibernate çš„å®ä¾‹çŠ¶æ€åˆ†ä¸º3é’Ÿâ€”â€“ç¬æ—¶çŠ¶æ€ ï¼ˆTransientï¼‰ã€æŒä¹…åŒ–çŠ¶æ€ ï¼ˆPersistentï¼‰ã€è„±ç®¡çŠ¶æ€ ï¼ˆDetachedï¼‰ã€‚</p>

<ul>
  <li>ç¬æ—¶çŠ¶æ€ï¼š</li>
</ul>

<p>å®ä½“ç«–å‘æ˜¯é€šè¿‡ Java ä¸­çš„ new å…³é”®å­—å¼€è¾Ÿå†…å­˜ç©ºé—´åˆ›å»ºçš„ Java å¯¹è±¡ï¼Œä½†æ˜¯å®ƒå¹¶æ²¡æœ‰çº³å…¥ Hibernate session çš„ç®¡ç†
ä¹‹ä¸­ï¼Œå¦‚æœæ²¡æœ‰å˜é‡å¯¹å®ƒåº”ç”¨ï¼Œå®ƒå°†è¢« JVM å›æ”¶ã€‚ç¬æ—¶çŠ¶æ€çš„å¯¹è±¡åœ¨å†…å­˜ä¸­æ˜¯å­¤ç«‹å­˜åœ¨çš„ï¼Œå®ƒä¸æ•°æ®åº“ä¸­çš„æ•°æ®æ— ä»»ä½•å…³è”ï¼Œä»…ä»…æ˜¯ä¸€ä¸ª
ä¿¡æ¯æºå¸¦çš„è½½ä½“ã€‚å‡å¦‚ä¸€ä¸ªç¬æ—¶çŠ¶æ€å¯¹è±¡è¢«æŒä¹…åŒ–çŠ¶æ€çš„å¯¹è±¡å¼•ç”¨ï¼Œå®ƒä¹Ÿä¼šè‡ªåŠ¨å˜ä¸ºæŒä¹…åŒ–çŠ¶æ€å¯¹è±¡ã€‚</p>

<ul>
  <li>æŒä¹…åŒ–çŠ¶æ€ï¼š</li>
</ul>

<p>æŒä¹…åŒ–çŠ¶æ€å¯¹è±¡å­˜åœ¨ä¸æ•°æ®åº“ä¸­çš„æ•°æ®å…³è”ï¼Œå®ƒæ€»æ˜¯ä¸ä¼šè¯çŠ¶æ€ï¼ˆsessionï¼‰å’Œäº‹åŠ¡ï¼ˆTransactionï¼‰å…³è”åœ¨ä¸€èµ·ã€‚å½“æŒä¹…åŒ–
çŠ¶æ€å¯¹è±¡å‘ç”Ÿæ”¹åŠ¨æ—¶å¹¶ä¸ä¼šç«‹å³æ‰§è¡Œæ•°æ®åº“æ“ä½œï¼Œåªæœ‰å½“äº‹åŠ¡ç»“æŸæ—¶ï¼Œæ‰ä¼šæ›´æ–°æ•°æ®åº“ï¼Œä»¥ä¿è¯ Hibernate çš„æŒä¹…åŒ–å¯¹è±¡å’Œæ•°æ®åº“æ“ä½œçš„
åŒæ­¥æ€§ã€‚å½“æŒä¹…åŒ–çŠ¶æ€çš„å¯¹è±¡å˜ä¸ºè„±ç®¡çŠ¶æ€å¯¹è±¡æ—¶ï¼Œå®ƒå°†ä¸åœ¨ Hibernate æŒä¹…å±‚çš„ç®¡ç†èŒƒå›´ä¹‹å†…ã€‚</p>

<ul>
  <li>è„±ç®¡çŠ¶æ€ï¼š</li>
</ul>

<p>å½“æŒä¹…åŒ–çŠ¶æ€çš„å¯¹è±¡çš„ session å…³é—­ä¹‹åï¼Œè¿™ä¸ªæ—¶å€™å°±ä»æŒä¹…åŒ–çŠ¶æ€çš„å¯¹è±¡å˜ä¸ºè„±ç®¡çŠ¶æ€çš„å¯¹è±¡ã€‚è„±ç®¡çŠ¶æ€çš„å¯¹è±¡ä»ç„¶å­˜åœ¨ä¸
æ•°æ®åº“ä¸­çš„æ•°æ®å…³è”ï¼Œåªæ˜¯å®ƒå¹¶ä¸æ˜¯ Hibernate çš„ session ç®¡ç†èŒƒå›´ä¹‹å†…ã€‚å¦‚æœå°†è„±ç®¡çŠ¶æ€çš„å¯¹è±¡é‡æ–°å…³è”æŸä¸ªæ–°çš„ session ä¸Šï¼Œå®ƒå°†
å˜å›æŒä¹…åŒ–çŠ¶æ€å¯¹è±¡ã€‚</p>

<p><img src="/assets/img/java_jsp/jsp-basic-37.png" alt="" /></p>
:ET